;/*FB_PKG_DELIM*/

__d("LSGetLocalizedReplySnippet",["LSGetThreadParticipantDisplayName","LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(a){return c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[0]=a[0],a})},function(e){return c.i64.eq(a[3],c.i64.cast([0,1]))?c.seq([function(e){return c.i64.eq(a[1],d[0])?c.seq([function(e){return c.i64.eq(a[2],d[0])?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,2421884758]),f).then(function(a){return d[4]=a})},function(a){return d[3]=d[4]}]):c.seq([function(e){return c.sp(b("LSGetThreadParticipantDisplayName"),a[0],a[2]).then(function(a){return a=a,d[4]=a[0],a})},function(a){return d[5]=c.createArray(),d[7]=(d[5].push(d[4]),d[5]),c.localizeV2Async(c.i64.cast([0,2676961947]),d[5]).then(function(a){return d[6]=a})},function(a){return d[3]=d[6]}])},function(a){return d[2]=d[3]}]):c.seq([function(e){return c.sp(b("LSGetThreadParticipantDisplayName"),a[0],a[1]).then(function(a){return a=a,d[3]=a[0],a})},function(e){return c.i64.eq(a[2],d[0])?c.seq([function(a){return d[5]=c.createArray(),d[7]=(d[5].push(d[3]),d[5]),c.localizeV2Async(c.i64.cast([0,3298086032]),d[5]).then(function(a){return d[6]=a})},function(a){return d[4]=d[6]}]):c.seq([function(e){return c.i64.eq(a[1],a[2])?c.seq([function(a){return d[6]=c.createArray(),d[8]=(d[6].push(d[3]),d[6]),c.localizeV2Async(c.i64.cast([0,3873263038]),d[6]).then(function(a){return d[7]=a})},function(a){return d[5]=d[7]}]):c.seq([function(e){return c.sp(b("LSGetThreadParticipantDisplayName"),a[0],a[2]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return d[7]=c.createArray(),d[9]=(d[7].push(d[3]),d[7]),d[9]=(d[7].push(d[6]),d[7]),c.localizeV2Async(c.i64.cast([0,2616853333]),d[7]).then(function(a){return d[8]=a})},function(a){return d[5]=d[8]}])},function(a){return d[4]=d[5]}])},function(a){return d[2]=d[4]}])},function(a){return d[1]=d[2]}]):c.seq([function(e){return c.i64.eq(a[1],d[0])?c.seq([function(e){return c.i64.eq(a[2],d[0])?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,4002265907]),f).then(function(a){return d[4]=a})},function(a){return d[3]=d[4]}]):c.seq([function(e){return c.sp(b("LSGetThreadParticipantDisplayName"),a[0],a[2]).then(function(a){return a=a,d[4]=a[0],a})},function(a){return d[5]=c.createArray(),d[7]=(d[5].push(d[4]),d[5]),c.localizeV2Async(c.i64.cast([0,2663996736]),d[5]).then(function(a){return d[6]=a})},function(a){return d[3]=d[6]}])},function(a){return d[2]=d[3]}]):c.seq([function(e){return c.sp(b("LSGetThreadParticipantDisplayName"),a[0],a[1]).then(function(a){return a=a,d[3]=a[0],a})},function(e){return c.i64.eq(a[2],d[0])?c.seq([function(a){return d[5]=c.createArray(),d[7]=(d[5].push(d[3]),d[5]),c.localizeV2Async(c.i64.cast([0,2868699317]),d[5]).then(function(a){return d[6]=a})},function(a){return d[4]=d[6]}]):c.seq([function(e){return c.i64.eq(a[1],a[2])?c.seq([function(a){return d[6]=c.createArray(),d[8]=(d[6].push(d[3]),d[6]),c.localizeV2Async(c.i64.cast([0,2688620547]),d[6]).then(function(a){return d[7]=a})},function(a){return d[5]=d[7]}]):c.seq([function(e){return c.sp(b("LSGetThreadParticipantDisplayName"),a[0],a[2]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return d[7]=c.createArray(),d[9]=(d[7].push(d[3]),d[7]),d[9]=(d[7].push(d[6]),d[7]),c.localizeV2Async(c.i64.cast([0,3544071775]),d[7]).then(function(a){return d[8]=a})},function(a){return d[5]=d[8]}])},function(a){return d[4]=d[5]}])},function(a){return d[2]=d[4]}])},function(a){return d[1]=d[2]}])},function(a){return e[0]=d[1]}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSInsertOptimisticAttachment",["LSSetMessageDisplayedContentTypes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e;return c.seq([function(d){return c.seq([function(b){return c.fe(c.ftr(c.db.table(16).fetch([[[a[0],a[2],a[4]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===a[2]&&b.attachmentFbid===a[4]&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(16).add({threadKey:a[0],messageId:a[2],attachmentFbid:a[4],timestampMs:a[1],offlineAttachmentId:a[3],attachmentType:a[5],filename:a[6],attributionAppId:a[7],hasMedia:a[8],isSharable:!1,hasXma:a[9],authorityLevel:c.i64.cast([0,20])})},function(d){return c.sp(b("LSSetMessageDisplayedContentTypes"),a[0],a[2],a[1],e,!1,c.i64.eq(a[5],c.i64.cast([0,1])))}])},function(a){return c.resolve(d)}])}c=a;f["default"]=c}),66);
__d("LSSetMessageViewFlags",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(d){return b.seq([function(d){return b.ftr(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}).next().then(function(a,d){var f=a.done;a=a.value;return f?(f=[b.i64.cast([0,0]),b.i64.cast([0,0]),b.i64.cast([0,0]),!1,"nonexistent",b.i64.cast([0,20]),e,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[0]=f[0],c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=f[6],c[7]=f[7],c[8]=f[8],f):(d=a.item,f=[d.timestampMs,d.senderId,d.viewFlags,d.isAdminMessage,d.messageId,d.authorityLevel,d.stickerId,d.primarySortKey,d.secondarySortKey==null?b.i64.cast([-1,4294967295]):d.secondarySortKey],c[0]=f[0],c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=f[6],c[7]=f[7],c[8]=f[8],f)})},function(d){return b.sb(b.ftr(b.db.table(12).fetch([[[a[0],{gt:c[7]}],[a[0],c[7]]],"messageDisplayOrder"]),function(d){return b.i64.eq(d.threadKey,a[0])&&d.messageId!==a[1]&&(b.i64.gt(d.primarySortKey,c[7])||b.i64.eq(d.primarySortKey,c[7])&&b.i64.ge(d.secondarySortKey==null?b.i64.cast([-1,4294967295]):d.secondarySortKey,c[8]))}),[["timestampMs","ASC"]],["primarySortKey","secondarySortKey"]).next().then(function(a,d){var f=a.done;a=a.value;return f?(f=[b.i64.cast([0,0]),b.i64.cast([0,0]),b.i64.cast([0,0]),!1,"nonexistent",b.i64.cast([0,20]),e,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[10]=f[0],c[11]=f[1],c[12]=f[2],c[13]=f[3],c[14]=f[4],c[15]=f[5],c[16]=f[6],c[17]=f[7],c[18]=f[8],f):(d=a.item,f=[d.timestampMs,d.senderId,d.viewFlags,d.isAdminMessage,d.messageId,d.authorityLevel,d.stickerId,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[10]=f[0],c[11]=f[1],c[12]=f[2],c[13]=f[3],c[14]=f[4],c[15]=f[5],c[16]=f[6],c[17]=f[7],c[18]=f[8],f)})},function(d){return b.sb(b.ftr(b.db.table(12).fetchDesc([[[a[0],{lt:c[7]}],[a[0],c[7]]],"messageDisplayOrder"]),function(d){return b.i64.eq(d.threadKey,a[0])&&d.messageId!==a[1]&&(b.i64.lt(d.primarySortKey,c[7])||b.i64.eq(d.primarySortKey,c[7])&&b.i64.le(d.secondarySortKey==null?b.i64.cast([-1,4294967295]):d.secondarySortKey,c[8]))}),[["timestampMs","DESC"]],["primarySortKey","secondarySortKey"]).next().then(function(a,d){var f=a.done;a=a.value;return f?(f=[b.i64.cast([0,0]),b.i64.cast([0,0]),b.i64.cast([0,0]),!1,"nonexistent",b.i64.cast([0,20]),e,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[20]=f[0],c[21]=f[1],c[22]=f[2],c[23]=f[3],c[24]=f[4],c[25]=f[5],c[26]=f[6],c[27]=f[7],c[28]=f[8],f):(d=a.item,f=[d.timestampMs,d.senderId,d.viewFlags,d.isAdminMessage,d.messageId,d.authorityLevel,d.stickerId,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[20]=f[0],c[21]=f[1],c[22]=f[2],c[23]=f[3],c[24]=f[4],c[25]=f[5],c[26]=f[6],c[27]=f[7],c[28]=f[8],f)})},function(d){return c[32]=b.i64.or_(b.i64.cast([0,2]),b.i64.or_(!c[3]&&!a[3]?b.i64.cast([0,4]):b.i64.cast([0,0]),b.i64.or_(c[3]?b.i64.cast([0,0]):b.i64.cast([0,1]),b.i64.or_(b.i64.eq(c[5],b.i64.cast([0,60]))||b.i64.eq(c[5],b.i64.cast([0,80]))?b.i64.cast([0,1048576]):b.i64.cast([0,0]),b.i64.neq(c[6],b.i64.cast([85970,924785702]))&&b.i64.neq(c[6],b.i64.cast([85970,1004785694]))&&b.i64.neq(c[6],b.i64.cast([85970,1044785690]))?b.i64.cast([0,0]):b.i64.cast([0,2097152]))))),c[14]!=="nonexistent"?b.seq([function(d){return c[35]=b.i64.or_(b.i64.and_(c[12],b.i64.cast([-1,4294967280])),b.i64.or_(b.i64.gt(b.i64.sub(c[10],c[0]),b.i64.cast([0,6e5]))?b.i64.cast([0,2]):b.i64.cast([0,0]),b.i64.or_(b.i64.eq(c[11],c[1])&&!c[13]&&!c[3]&&!b.i64.gt(b.i64.sub(c[10],c[0]),b.i64.cast([0,6e5]))?b.i64.cast([0,8]):b.i64.cast([0,0]),b.i64.or_(!a[3]&&!c[13]&&!(b.i64.eq(c[11],c[1])&&!c[13]&&!c[3]&&!b.i64.gt(b.i64.sub(c[10],c[0]),b.i64.cast([0,6e5])))?b.i64.cast([0,4]):b.i64.cast([0,0]),b.i64.and_(c[12],b.i64.cast([0,1])))))),c[33]=b.i64.eq(b.i64.and_(c[35],b.i64.cast([0,8])),b.i64.cast([0,8])),c[34]=c[33]?b.i64.or_(c[32],b.i64.cast([0,16])):c[32],b.fe(b.ftr(b.db.table(12).fetch([[[a[0],c[10],c[14]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(d.timestampMs,c[10])&&d.messageId===c[14]}),function(a){var b=a.update;a.item;return b({viewFlags:c[35]})})},function(a){return c[30]=c[33]?b.i64.and_(c[34],b.i64.cast([-1,4294967294])):c[34]}]):b.resolve(c[30]=c[32])},function(d){return c[24]!=="nonexistent"?b.seq([function(d){return c[35]=b.i64.or_(b.i64.and_(c[30],b.i64.cast([-1,4294967280])),b.i64.or_(b.i64.gt(b.i64.sub(c[0],c[20]),b.i64.cast([0,6e5]))?b.i64.cast([0,2]):b.i64.cast([0,0]),b.i64.or_(b.i64.eq(c[1],c[21])&&!c[3]&&!c[23]&&!b.i64.gt(b.i64.sub(c[0],c[20]),b.i64.cast([0,6e5]))?b.i64.cast([0,8]):b.i64.cast([0,0]),b.i64.or_(!a[3]&&!c[3]&&!(b.i64.eq(c[1],c[21])&&!c[3]&&!c[23]&&!b.i64.gt(b.i64.sub(c[0],c[20]),b.i64.cast([0,6e5])))?b.i64.cast([0,4]):b.i64.cast([0,0]),b.i64.and_(c[30],b.i64.cast([0,1])))))),c[33]=b.i64.eq(b.i64.and_(c[35],b.i64.cast([0,8])),b.i64.cast([0,8])),c[34]=c[33]?b.i64.or_(c[22],b.i64.cast([0,16])):c[22],b.fe(b.ftr(b.db.table(12).fetch([[[a[0],c[20],c[24]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(d.timestampMs,c[20])&&d.messageId===c[24]}),function(a){var d=a.update;a.item;return d({viewFlags:c[33]?b.i64.and_(c[34],b.i64.cast([-1,4294967294])):c[34]})})},function(a){return c[31]=c[35]}]):b.resolve(c[31]=c[30])},function(d){return b.fe(b.ftr(b.db.table(12).fetch([[[a[0],c[0],c[4]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(d.timestampMs,c[0])&&d.messageId===c[4]}),function(a){var b=a.update;a.item;return b({viewFlags:c[31]})})}])},function(a){return b.resolve(d)}])}b=a;f["default"]=b}),66);
__d("LSLocalApplyOptimisticMessage",["LSCreateOfflineThreadingID","LSGetLocalizedReplySnippet","LSIssueNewError","LSSetMessageDisplayedContentTypes","LSSetMessageViewFlags"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(a){return d[0]=c.i64.of_float(Date.now()),f!==f?c.resolve(d[1]=f):c.seq([function(a){return c.sp(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[1]=c.i64.to_string(d[9])}])},function(e){return d[8]=a[4]==null?a[3]:a[4],c.seq([function(a){return c.islc(c.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?d[9]=c.i64.cast([-1,4294967295]):(b=a.item,d[9]=b.lastActivityTimestampMs)})},function(e){return d[11]=c.i64.add(d[9],c.i64.cast([0,1])),d[13]=c.i64.gt(d[0],d[11])?d[0]:d[11],c.db.table(9).fetch([[[a[1]]]]).next().then(function(e,h){h=e.done;e=e.value;return h?c.seq([function(b){return function(a){c.logger(a).info(a)}("localApplyOptimisticMessage insert optimistic thread"),c.fe(c.ftr(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,40]))}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[1],mailboxType:c.i64.cast([0,0]),threadType:a[2],clientThreadKey:a[1],folderName:"inbox",parentThreadKey:c.i64.cast([0,0]),lastActivityTimestampMs:d[13],lastReadWatermarkTimestampMs:d[13],snippet:d[8],snippetHasEmoji:a[5]==null?!1:a[5],snippetSenderContactId:a[0],ongoingCallState:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,40])})},function(b){return c.i64.eq(a[2],c.i64.cast([0,13]))||c.i64.eq(a[2],c.i64.cast([0,7]))||c.i64.eq(a[2],c.i64.cast([0,1]))?c.seq([function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[1],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[1],contactId:a[1],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),isModerator:!1})}]):c.resolve()},function(a){return c.sb(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=!1:(b=a.item,d[14]=b.errorShouldBeShown)})},function(a){return d[14]===!0?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,2285622730]),f).then(function(a){return d[16]=a})},function(a){return c.localizeV2Async(c.i64.cast([0,1919524925]),f).then(function(a){return d[17]=a})},function(a){return c.sp(b("LSIssueNewError"),f,c.i64.cast([0,1545093]),d[16],d[17],f,f)}]):c.resolve()}]):(e.item,c.fe(c.ftr(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(b.threadType,a[2])}),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:d[13],lastReadWatermarkTimestampMs:d[13],snippet:d[8],snippetHasEmoji:a[5]==null?!1:a[5],snippetSenderContactId:a[0],snippetStringHash:f,snippetStringArgument1:f,snippetAttribution:f,snippetAttributionStringHash:f,additionalThreadContext:f})}))})}])},function(e){return c.seq([function(b){return c.islc(c.ftr(c.db.table(12).fetchDesc([[[a[1]]],"messageDisplayOrder"]),function(b){return c.i64.eq(b.threadKey,a[1])&&(c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))||c.i64.eq(b.authorityLevel,c.i64.cast([0,60]))||c.i64.eq(b.authorityLevel,c.i64.cast([0,40])))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[33]=c.i64.of_float(Date.now()),d[9]=d[33]):(b=a.item,d[9]=b.primarySortKey)})},function(e){return a[8]!==f&&(c.i64.eq(a[9],c.i64.cast([0,1]))||c.i64.eq(a[10],c.i64.cast([0,1])))?c.seq([function(e){return c.ftr(c.db.table(12).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===(a[8]==null?"":a[8])}).next().then(function(e,h){var i=e.done;e=e.value;return i?(i=[a[8],f,f,c.i64.cast([0,0]),f,f,f,f,f,f,f,f,f,f,f,f],d[33]=i[0],d[34]=i[1],d[35]=i[2],d[36]=i[3],d[37]=i[4],d[38]=i[5],d[39]=i[6],d[40]=i[7],d[41]=i[8],d[42]=i[9],d[43]=i[10],d[44]=i[11],d[45]=i[12],d[46]=i[13],d[47]=i[14],d[48]=i[15],i):(h=e.item,c.seq([function(e){return d[54]=h.senderId,d[53]=h.stickerId,c.i64.neq(d[53],f)?(e=[d[53],c.i64.cast([0,4])],d[56]=e[0],d[57]=e[1],e):(e=[f,f],d[56]=e[0],d[57]=e[1],e),e=[d[56],d[57]],d[50]=e[0],d[51]=e[1],e,d[55]=h.replyType==null?c.i64.cast([0,0]):h.replyType,c.seq([function(e){return c.sp(b("LSGetLocalizedReplySnippet"),a[1],a[0],d[54],d[55]).then(function(a){return a=a,d[56]=a[0],a})},function(b){return d[52]=c.i64.eq(a[10],c.i64.cast([0,1]))?d[56]:""}])},function(b){return b=[a[8],a[9],a[10],c.i64.cast([0,1]),d[52],d[54],h.text,d[50],d[51],f,f,f,f,f,f,d[55]],d[33]=b[0],d[34]=b[1],d[35]=b[2],d[36]=b[3],d[37]=b[4],d[38]=b[5],d[39]=b[6],d[40]=b[7],d[41]=b[8],d[42]=b[9],d[43]=b[10],d[44]=b[11],d[45]=b[12],d[46]=b[13],d[47]=b[14],d[48]=b[15],b}]))})},function(a){return a=[d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42],d[43],d[44],d[45],d[46],d[47],d[48]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],d[16]=a[5],d[17]=a[6],d[18]=a[7],d[19]=a[8],d[20]=a[9],d[21]=a[10],d[22]=a[11],d[23]=a[12],d[24]=a[13],d[25]=a[14],d[26]=a[15],a}]):c.resolve((a[8]===f||c.i64.eq(a[9],c.i64.cast([0,0]))||c.i64.eq(a[10],c.i64.cast([0,0]))?(e=[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],d[33]=e[0],d[34]=e[1],d[35]=e[2],d[36]=e[3],d[37]=e[4],d[38]=e[5],d[39]=e[6],d[40]=e[7],d[41]=e[8],d[42]=e[9],d[43]=e[10],d[44]=e[11],d[45]=e[12],d[46]=e[13],d[47]=e[14],d[48]=e[15],e):(e=[a[8],a[9],a[10],c.i64.cast([0,1]),f,f,f,f,f,f,f,f,f,f,f,f],d[33]=e[0],d[34]=e[1],d[35]=e[2],d[36]=e[3],d[37]=e[4],d[38]=e[5],d[39]=e[6],d[40]=e[7],d[41]=e[8],d[42]=e[9],d[43]=e[10],d[44]=e[11],d[45]=e[12],d[46]=e[13],d[47]=e[14],d[48]=e[15],e),e=[d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42],d[43],d[44],d[45],d[46],d[47],d[48]],d[11]=e[0],d[12]=e[1],d[13]=e[2],d[14]=e[3],d[15]=e[4],d[16]=e[5],d[17]=e[6],d[18]=e[7],d[19]=e[8],d[20]=e[9],d[21]=e[10],d[22]=e[11],d[23]=e[12],d[24]=e[13],d[25]=e[14],d[26]=e[15],e))},function(b){return a[13]?d[27]=!1:d[27]=!0,d[27]?(b=[f,f,f,f],d[28]=b[0],d[29]=b[1],d[30]=b[2],d[31]=b[3],b):(d[33]=a[13].get("mention_offsets"),a[13],d[34]=a[13].get("mention_lengths"),a[13],d[35]=a[13].get("mention_ids"),a[13],d[36]=a[13].get("mention_types"),a[13],b=[d[33],d[34],d[35],d[36]],d[28]=b[0],d[29]=b[1],d[30]=b[2],d[31]=b[3],b),a[11]?d[32]=c.i64.cast([0,3]):d[32]=d[13],c.i64.eq(c.i64.cast([0,20]),c.i64.cast([0,20]))?c.db.table(12).add({threadKey:a[1],messageId:d[1],timestampMs:d[0],offlineThreadingId:d[1],primarySortKey:d[9],secondarySortKey:d[0],text:a[3],senderId:a[0],stickerId:a[6],hotEmojiSize:a[7],isForwarded:a[11],forwardScore:a[12],isAdminMessage:!1,sendStatus:c.i64.cast([0,1]),sendStatusV2:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,20]),replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[32],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],replyType:d[26],mentionOffsets:d[28],mentionLengths:d[29],mentionIds:d[30],mentionTypes:d[31]}):c.seq([function(a){return c.db.table(12).fetch([[[d[1]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[d[9],d[0],f],d[33]=c[0],d[34]=c[1],d[35]=c[2],c):(b=a.item,c=[b.primarySortKey,b.secondarySortKey,b.localDataId],d[33]=c[0],d[34]=c[1],d[35]=c[2],c)})},function(a){return c.fe(c.ftr(c.db.table(12).fetch([[[d[1]]],"optimistic"]),function(a){return a.offlineThreadingId===d[1]&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(12).add({threadKey:a[1],messageId:d[1],timestampMs:d[0],offlineThreadingId:d[1],primarySortKey:d[33],secondarySortKey:d[34],text:a[3],senderId:a[0],stickerId:a[6],hotEmojiSize:a[7],isForwarded:a[11],forwardScore:a[12],isAdminMessage:!1,sendStatus:c.i64.cast([0,1]),sendStatusV2:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,20]),localDataId:d[35],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[32],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],replyType:d[26],mentionOffsets:d[28],mentionLengths:d[29],mentionIds:d[30],mentionTypes:d[31]})}])}])},function(e){return d[2]=c.createArray(),d[3]=(d[2].push("LSMailboxLocalApplyOptimisticMessageStoredProcedure"),d[2]),d[4]=(d[2].push("localApplyOptimisticMessage"),d[2]),d[5]=(d[2].push(a[1]),d[2]),d[6]=(d[2].push(d[1]),d[2]),d[7]=c.toJSON(d[2]),function(a){c.logger(a).info(a)}(d[7]),a[14]?c.seq([function(e){return c.sp(b("LSSetMessageViewFlags"),a[1],d[1],d[0],c.i64.eq(a[2],c.i64.cast([0,1])))},function(e){return c.sp(b("LSSetMessageDisplayedContentTypes"),a[1],d[1],d[0],a[3],!1,c.i64.neq(a[6],f))}]):c.resolve()},function(a){return a=[d[1],d[0]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSLocalApplyOptimisticMessageV2",["LSCreateOfflineThreadingID","LSGetLocalizedReplySnippet","LSIssueNewError","LSSetMessageDisplayedContentTypes","LSSetMessageViewFlags"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(a){return d[0]=c.i64.of_float(Date.now()),c.sp(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[1]=a[0],a})},function(e){return d[4]=c.i64.to_string(d[1]),d[3]=a[4]==null?a[3]:a[4],c.seq([function(b){return d[5]=a[5].get("snippet_has_emoji"),a[5],c.islc(c.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?d[6]=c.i64.cast([-1,4294967295]):(b=a.item,d[6]=b.lastActivityTimestampMs)})},function(e){return d[8]=c.i64.add(d[6],c.i64.cast([0,1])),d[10]=c.i64.gt(d[0],d[8])?d[0]:d[8],c.db.table(9).fetch([[[a[1]]]]).next().then(function(e,h){h=e.done;e=e.value;return h?c.seq([function(b){return function(a){c.logger(a).info(a)}("localApplyOptimisticMessage insert optimistic thread"),c.i64.eq(a[2],c.i64.cast([0,1]))?c.seq([function(b){return c.ftr(c.db.table(7).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.id,a[1])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?d[16]=!1:(b=a.item,d[19]=b.capabilities2,c.i64.neq(d[19],f)?d[18]=d[19]:d[18]=c.i64.cast([0,0]),d[16]=c.i64.neq(c.i64.and_(d[18],c.i64.cast([0,4096])),c.i64.cast([0,0])))})},function(a){return d[11]=d[16]}]):c.resolve(d[11]=!1)},function(b){return d[11]?d[12]="e2ee_cutover":d[12]="inbox",d[11]?d[13]=c.i64.cast([-1,4294967279]):d[13]=c.i64.cast([0,0]),c.fe(c.ftr(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,40]))}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[1],mailboxType:c.i64.cast([0,0]),threadType:a[2],clientThreadKey:a[1],folderName:d[12],parentThreadKey:d[13],lastActivityTimestampMs:d[10],lastReadWatermarkTimestampMs:d[10],snippet:d[3],snippetHasEmoji:d[5]==null?!1:d[5],snippetSenderContactId:a[0],ongoingCallState:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,40])})},function(b){return c.i64.eq(a[2],c.i64.cast([0,13]))||c.i64.eq(a[2],c.i64.cast([0,7]))||c.i64.eq(a[2],c.i64.cast([0,1]))?c.seq([function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[1],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[1],contactId:a[1],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),isModerator:!1})}]):c.resolve()},function(a){return c.sb(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=!1:(b=a.item,d[14]=b.errorShouldBeShown)})},function(a){return d[14]===!0?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,2285622730]),f).then(function(a){return d[16]=a})},function(a){return c.localizeV2Async(c.i64.cast([0,1919524925]),f).then(function(a){return d[17]=a})},function(a){return c.sp(b("LSIssueNewError"),f,c.i64.cast([0,1545093]),d[16],d[17],f,f)}]):c.resolve()}]):(e.item,c.fe(c.ftr(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(b.threadType,a[2])}),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:d[10],lastReadWatermarkTimestampMs:d[10],snippet:d[3],snippetHasEmoji:d[5]==null?!1:d[5],snippetSenderContactId:a[0],snippetStringHash:f,snippetStringArgument1:f,snippetAttribution:f,snippetAttributionStringHash:f,additionalThreadContext:f})}))})}])},function(e){return c.seq([function(b){return c.islc(c.ftr(c.db.table(12).fetchDesc([[[a[1]]],"messageDisplayOrder"]),function(b){return c.i64.eq(b.threadKey,a[1])&&(c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))||c.i64.eq(b.authorityLevel,c.i64.cast([0,60]))||c.i64.eq(b.authorityLevel,c.i64.cast([0,40])))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[49]=c.i64.of_float(Date.now()),d[5]=d[49]):(b=a.item,d[5]=b.primarySortKey)})},function(e){return d[7]=a[5].get("reply_source_id"),a[5],d[8]=a[5].get("reply_source_type"),a[5],d[9]=a[5].get("reply_source_type_v2"),a[5],d[10]=a[5].get("reply_type"),a[5],d[7]!==f&&(c.i64.eq(d[8],c.i64.cast([0,1]))||c.i64.eq(d[9],c.i64.cast([0,1])))?c.seq([function(e){return c.ftr(c.db.table(12).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===(d[7]==null?"":d[7])}).next().then(function(e,h){var i=e.done;e=e.value;return i?(i=[d[7],f,f,c.i64.cast([0,0]),f,f,f,f,f,f,f,f,f,f,f,f],d[49]=i[0],d[50]=i[1],d[51]=i[2],d[52]=i[3],d[53]=i[4],d[54]=i[5],d[55]=i[6],d[56]=i[7],d[57]=i[8],d[58]=i[9],d[59]=i[10],d[60]=i[11],d[61]=i[12],d[62]=i[13],d[63]=i[14],d[64]=i[15],i):(h=e.item,c.seq([function(e){return d[70]=h.senderId,d[69]=h.stickerId,c.i64.neq(d[69],f)?(e=[d[69],c.i64.cast([0,4])],d[71]=e[0],d[72]=e[1],e):(e=[f,f],d[71]=e[0],d[72]=e[1],e),e=[d[71],d[72]],d[66]=e[0],d[67]=e[1],e,c.seq([function(e){return c.sp(b("LSGetLocalizedReplySnippet"),a[1],a[0],d[70],d[10]==null?c.i64.cast([0,0]):d[10]).then(function(a){return a=a,d[71]=a[0],a})},function(a){return d[68]=c.i64.eq(d[9],c.i64.cast([0,1]))?d[71]:""}])},function(a){return a=[d[7],d[8],d[9],c.i64.cast([0,1]),d[68],d[70],h.text,d[66],d[67],f,f,f,f,f,f,d[10]],d[49]=a[0],d[50]=a[1],d[51]=a[2],d[52]=a[3],d[53]=a[4],d[54]=a[5],d[55]=a[6],d[56]=a[7],d[57]=a[8],d[58]=a[9],d[59]=a[10],d[60]=a[11],d[61]=a[12],d[62]=a[13],d[63]=a[14],d[64]=a[15],a}]))})},function(a){return a=[d[49],d[50],d[51],d[52],d[53],d[54],d[55],d[56],d[57],d[58],d[59],d[60],d[61],d[62],d[63],d[64]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],d[16]=a[5],d[17]=a[6],d[18]=a[7],d[19]=a[8],d[20]=a[9],d[21]=a[10],d[22]=a[11],d[23]=a[12],d[24]=a[13],d[25]=a[14],d[26]=a[15],a}]):c.resolve((d[7]===f||c.i64.eq(d[8],c.i64.cast([0,0]))||c.i64.eq(d[9],c.i64.cast([0,0]))?(e=[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],d[49]=e[0],d[50]=e[1],d[51]=e[2],d[52]=e[3],d[53]=e[4],d[54]=e[5],d[55]=e[6],d[56]=e[7],d[57]=e[8],d[58]=e[9],d[59]=e[10],d[60]=e[11],d[61]=e[12],d[62]=e[13],d[63]=e[14],d[64]=e[15],e):(e=[d[7],d[8],d[9],c.i64.cast([0,1]),f,f,f,f,f,f,f,f,f,f,f,f],d[49]=e[0],d[50]=e[1],d[51]=e[2],d[52]=e[3],d[53]=e[4],d[54]=e[5],d[55]=e[6],d[56]=e[7],d[57]=e[8],d[58]=e[9],d[59]=e[10],d[60]=e[11],d[61]=e[12],d[62]=e[13],d[63]=e[14],d[64]=e[15],e),e=[d[49],d[50],d[51],d[52],d[53],d[54],d[55],d[56],d[57],d[58],d[59],d[60],d[61],d[62],d[63],d[64]],d[11]=e[0],d[12]=e[1],d[13]=e[2],d[14]=e[3],d[15]=e[4],d[16]=e[5],d[17]=e[6],d[18]=e[7],d[19]=e[8],d[20]=e[9],d[21]=e[10],d[22]=e[11],d[23]=e[12],d[24]=e[13],d[25]=e[14],d[26]=e[15],e))},function(b){return d[27]=a[5].get("mention_data"),a[5],d[27]?d[28]=!1:d[28]=!0,d[28]?(b=[f,f,f,f],d[29]=b[0],d[30]=b[1],d[31]=b[2],d[32]=b[3],b):(d[49]=d[27].get("mention_offsets"),d[27],d[50]=d[27].get("mention_lengths"),d[27],d[51]=d[27].get("mention_ids"),d[27],d[52]=d[27].get("mention_types"),d[27],b=[d[49],d[50],d[51],d[52]],d[29]=b[0],d[30]=b[1],d[31]=b[2],d[32]=b[3],b),d[33]=a[5].get("magic_words_data"),a[5],d[33]?d[34]=!1:d[34]=!0,d[34]?(b=[f,f],d[35]=b[0],d[36]=b[1],b):(d[49]=d[33].get("magic_word_offsets"),d[33],d[50]=d[33].get("magic_word_lengths"),d[33],b=[d[49],d[50]],d[35]=b[0],d[36]=b[1],b),d[48]=c.i64.eq(d[10],c.i64.cast([0,1]))?d[17]:a[3],d[37]=a[5].get("sticker_id"),a[5],d[38]=a[5].get("sticker_alt_text"),a[5],d[39]=a[5].get("hot_emoji_size"),a[5],d[40]=a[5].get("is_forwarded"),a[5],d[41]=a[5].get("forward_score"),a[5],d[42]=a[5].get("power_up_style"),a[5],d[43]=a[5].get("local_data_id"),a[5],d[44]=a[5].get("command_type"),a[5],d[45]=a[5].get("reply_type"),a[5],d[46]=a[5].get("is_forwarded"),a[5],d[46]?d[47]=c.i64.cast([0,3]):d[47]=d[13],c.i64.eq(c.i64.cast([0,20]),c.i64.cast([0,20]))?c.db.table(12).add({threadKey:a[1],messageId:d[4],timestampMs:d[0],offlineThreadingId:d[4],primarySortKey:d[5],secondarySortKey:d[0],text:d[48],senderId:a[0],stickerId:d[37],hotEmojiSize:d[39],isForwarded:d[40],forwardScore:d[41],isAdminMessage:!1,sendStatus:c.i64.cast([0,1]),sendStatusV2:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,20]),localDataId:d[43],replyType:d[26],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[47],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],mentionOffsets:d[29],mentionLengths:d[30],mentionIds:d[31],mentionTypes:d[32]}):c.seq([function(a){return c.db.table(12).fetch([[[d[4]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[d[5],d[0],d[43]],d[49]=c[0],d[50]=c[1],d[51]=c[2],c):(b=a.item,c=[b.primarySortKey,b.secondarySortKey,b.localDataId],d[49]=c[0],d[50]=c[1],d[51]=c[2],c)})},function(a){return c.fe(c.ftr(c.db.table(12).fetch([[[d[4]]],"optimistic"]),function(a){return a.offlineThreadingId===d[4]&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(12).add({threadKey:a[1],messageId:d[4],timestampMs:d[0],offlineThreadingId:d[4],primarySortKey:d[49],secondarySortKey:d[50],text:d[48],senderId:a[0],stickerId:d[37],hotEmojiSize:d[39],isForwarded:d[40],forwardScore:d[41],isAdminMessage:!1,sendStatus:c.i64.cast([0,1]),sendStatusV2:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,20]),localDataId:d[51],replyType:d[26],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[47],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],mentionOffsets:d[29],mentionLengths:d[30],mentionIds:d[31],mentionTypes:d[32]})}])}])},function(e){return d[5]=c.createArray(),d[6]=(d[5].push("LSMailboxLocalApplyOptimisticMessageV2StoredProcedure"),d[5]),d[7]=(d[5].push("localApplyOptimisticMessage"),d[5]),d[8]=(d[5].push(a[1]),d[5]),d[9]=(d[5].push(d[4]),d[5]),d[10]=c.toJSON(d[5]),function(a){c.logger(a).info(a)}(d[10]),d[2]=a[5].get("calculate_denormalizations"),a[5],(d[2]==null?!0:d[2])?c.seq([function(e){return c.sp(b("LSSetMessageViewFlags"),a[1],d[4],d[0],c.i64.eq(a[2],c.i64.cast([0,1])))},function(e){return d[5]=a[5].get("sticker_id"),a[5],c.sp(b("LSSetMessageDisplayedContentTypes"),a[1],d[4],d[0],a[3],!1,c.i64.neq(d[5],f))}]):c.resolve()},function(a){return a=[d[4],d[0]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSOptimisticMarkThreadReadV2",["LSIssueNewTask","LSMarkThreadRead"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(d){return c.sp(b("LSMarkThreadRead"),a[1],a[0])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[6]=b.syncGroup,c.i64.neq(d[6],f)?d[5]=d[6]:d[5]=c.i64.cast([0,1]),d[0]=d[5])})},function(e){return d[2]=new c.Map(),d[2].set("thread_id",a[0]),d[2].set("last_read_watermark_ts",a[1]),d[2].set("sync_group",d[0]),d[3]=d[2].get("thread_id"),d[2],d[4]=c.toJSON(d[2]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[3]),c.i64.cast([0,21]),d[4],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSAppendDataTraceAddon.nop",["LSAppendDataTraceAddon","LSFactory","Promise","killswitch"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,d,e,f,g,i,j){return c("killswitch")("MESSENGER_WEB_DATA_TRACE_ID")?(h||(h=b("Promise"))).resolve():c("LSAppendDataTraceAddon")(e,f,g,(d=i)!=null?d:"",(e=j)!=null?e:"",c("LSFactory")(a))};g["default"]=a}),98);
__d("LSUpdateOptimisticAttachmentPreview",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d;return b.seq([function(c){return b.fe(b.ftr(b.db.table(16).fetch([[[a[0],a[1],a[2]]]]),function(c){return c.attachmentFbid===a[2]&&b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.authorityLevel,b.i64.cast([0,20]))}),function(b){var c=b.update;b.item;return c({playableUrl:a[3],playableUrlFallback:a[4],playableUrlExpirationTimestampMs:a[5],playableUrlMimeType:a[6],previewUrl:a[7],previewUrlFallback:a[8],previewUrlExpirationTimestampMs:a[9],previewUrlMimeType:a[10],previewWidth:a[11],previewHeight:a[12],imageUrl:d,imageUrlFallback:d,imageUrlExpirationTimestampMs:d,imageUrlMimeType:d})})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSOptimisticSendMessageV2",["LSAppendDataTraceAddon.nop","LSInsertOptimisticAttachment","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessageV2","LSLogEventAnnotate.nop","LSOptimisticMarkThreadReadV2","LSPredefineTraceForTask","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return c.sp(b("LSLocalApplyOptimisticMessageV2"),a[0],a[1],a[2],a[4],a[5],a[6]).then(function(a){return a=a,d[0]=a[0],d[1]=a[1],a})},function(e){return c.seq([function(e){return d[4]=a[6].get("external_attachment_url"),a[6],d[28]=d[4]===""?f:d[4],d[28]!==f?c.seq([function(e){return d[29]=a[6].get("attribution_app_id"),a[6],d[30]=a[6].get("optimistic_attachment_preview"),a[6],c.sp(b("LSInsertOptimisticAttachment"),a[1],d[1],d[0],d[0],d[0],c.i64.cast([0,3]),d[28],d[29],!0,!1)},function(e){return d[30]?d[31]=!1:d[31]=!0,d[31]?c.resolve():(d[32]=d[30].get("playable_url"),d[30],d[33]=d[30].get("playable_url_fallback"),d[30],d[34]=d[30].get("playable_url_expiration_timestamp_ms"),d[30],d[35]=d[30].get("playable_url_mime_type"),d[30],d[36]=d[30].get("preview_url"),d[30],d[37]=d[30].get("preview_url_fallback"),d[30],d[38]=d[30].get("preview_url_expiration_timestamp_ms"),d[30],d[39]=d[30].get("preview_url_mime_type"),d[30],d[40]=d[30].get("preview_width"),d[30],d[41]=d[30].get("preview_height"),d[30],d[42]=d[30].get("image_url"),d[30],d[43]=d[30].get("image_url_fallback"),d[30],d[44]=d[30].get("image_url_expiration_timestamp_ms"),d[30],d[45]=d[30].get("image_url_mime_type"),d[30],c.sp(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[0],d[0],d[32],d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41]))},function(a){return d[5]=c.i64.cast([0,7])}]):c.seq([function(e){return d[29]=a[6].get("sticker_id"),a[6],c.i64.neq(d[29],f)?c.seq([function(e){return c.i64.neq(d[29],c.i64.cast([53057,267535043]))&&c.i64.neq(d[29],c.i64.cast([85970,924785702]))&&c.i64.neq(d[29],c.i64.cast([85970,1004785694]))&&c.i64.neq(d[29],c.i64.cast([85970,1044785690]))?c.seq([function(e){return d[33]=c.i64.to_string(d[29]),d[31]=a[6].get("optimistic_attachment_preview"),a[6],c.sp(b("LSInsertOptimisticAttachment"),a[1],d[1],d[0],c.i64.to_string(d[29]),d[33],c.i64.cast([0,1]),f,f,!0,!1)},function(e){return d[31]?d[32]=!1:d[32]=!0,d[32]?c.resolve():(d[34]=d[31].get("playable_url"),d[31],d[35]=d[31].get("playable_url_fallback"),d[31],d[36]=d[31].get("playable_url_expiration_timestamp_ms"),d[31],d[37]=d[31].get("playable_url_mime_type"),d[31],d[38]=d[31].get("preview_url"),d[31],d[39]=d[31].get("preview_url_fallback"),d[31],d[40]=d[31].get("preview_url_expiration_timestamp_ms"),d[31],d[41]=d[31].get("preview_url_mime_type"),d[31],d[42]=d[31].get("preview_width"),d[31],d[43]=d[31].get("preview_height"),d[31],d[44]=d[31].get("image_url"),d[31],d[45]=d[31].get("image_url_fallback"),d[31],d[46]=d[31].get("image_url_expiration_timestamp_ms"),d[31],d[47]=d[31].get("image_url_mime_type"),d[31],c.sp(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[0],d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42],d[43]))}]):c.resolve()},function(a){return d[30]=c.i64.cast([0,2])}]):c.resolve(d[30]=c.i64.cast([0,1]))},function(a){return d[5]=d[30]}])},function(e){return c.sp(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),c.i64.to_string(a[1]),c.i64.cast([0,46]),"",f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,1]),f,c.i64.cast([0,0]),f).then(function(a){return a=a,d[6]=a[0],a})},function(e){return d[7]=a[6].get("data_trace_id"),a[6],d[7]!==f?c.seq([function(a){return c.sp(b("LSPredefineTraceForTask"),d[7],d[6],c.i64.to_string(c.i64.cast([0,46])),d[0])},function(e){return d[29]=a[6].get("source"),a[6],d[32]=c.i64.to_string(d[29]),d[32]!==f?d[30]=d[32]:d[30]=c.i64.to_string(c.i64.cast([0,0])),d[31]=",",c.nop(b("LSAppendDataTraceAddon.nop"),d[7],c.i64.cast([0,20]),c.i64.cast([0,1]),f,[d[30],d[31],c.i64.to_string(d[5]),d[31],c.i64.to_string(a[2])].join(""))}]):c.resolve()},function(b){return d[8]=a[6].get("source"),a[6],d[9]=a[6].get("external_attachment_url"),a[6],d[10]=a[6].get("platform_ref"),a[6],d[11]=a[6].get("platform_token"),a[6],d[12]=a[6].get("reply_source_id"),a[6],d[13]=a[6].get("reply_source_type"),a[6],d[14]=a[6].get("mark_read"),a[6],d[15]=a[6].get("initiating_app_id"),a[6],d[16]=a[6].get("initiating_source"),a[6],d[17]=a[6].get("navigation_chain"),a[6],d[18]=a[6].get("dety_params"),a[6],d[19]=a[6].get("skip_url_preview_gen"),a[6],d[20]=a[6].get("text_has_links"),a[6],c.db.table(31).add({taskId:d[6],threadKey:a[1],offlineThreadingId:d[0],threadAttributionSource:d[8],externalAttachmentUrl:d[9],platformRef:d[10],platformToken:d[11],replySourceId:d[12],replySourceType:d[13],sendType:d[5],markThreadRead:d[14]==null?!1:d[14],initiatingSource:d[16],skipUrlPreviewGen:d[19],textHasLinks:d[20]})},function(e){return d[21]=a[6].get("mark_read"),a[6],(d[21]==null?!1:d[21])?c.sp(b("LSOptimisticMarkThreadReadV2"),a[1],d[1]):c.resolve()},function(e){return d[22]=c.createArray(),d[23]=(d[22].push("optimisticSendMessageV2"),d[22]),d[24]=(d[22].push(a[1]),d[22]),d[25]=(d[22].push(d[0]),d[22]),d[26]=c.toJSON(d[22]),function(a){c.logger(a).info(a)}(d[26]),d[27]=new c.Map(),d[27].set("offline_threading_id",d[0]),d[27].set("task_id",d[6]),d[27].set("task_queue_name",c.i64.to_string(a[1])),d[27].set("task_label",c.i64.to_string(c.i64.cast([0,46]))),c.nop(b("LSLogEventAnnotate.nop"),c.i64.cast([0,16]),c.i64.cast([0,23]),c.i64.cast([0,0]),d[27])},function(a){return a=[d[0],d[6]],d[2]=a[0],d[3]=a[1],a}])},function(a){return e[0]=d[2]}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("CometLazyDialogTrigger.react",["react","useCometLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";d("react");var h=d("react").useCallback;function a(a){var b=a.children,d=a.dialogProps,e=a.dialogResource,f=a.fallback,g=a.onHide,i=a.onShow;a=c("useCometLazyDialog")(e,f);var j=a[0];e=a[1];f=h(function(){j(d,g),i==null?void 0:i()},[j,d,g,i]);return b(f,e)}g["default"]=a}),98);
__d("IGDBroadcastChannelLoggerDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("IGDBroadcastChannelLogger").__setRef("IGDBroadcastChannelLoggerDeferred");function a(a){h.onReady(function(b){return b.log(a)})}g.log=a}),98);
__d("useIGDBroadcastChannelLogger",["I64","IGDBroadcastChannelLoggerDeferred","Int64Hooks","ReQL","ReQLSuspense","asyncToGeneratorRuntime","usePolarisViewer","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var e=c("useReStore")(),f=c("usePolarisViewer")(),g=d("I64").of_string((f=f==null?void 0:f.id)!=null?f:"0"),i=h(a);f=d("Int64Hooks").useCallbackInt64(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=a!=null?yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.table("threads")).getKeyRange(a).map(function(a){return a.consistentThreadFbid})):null;d("IGDBroadcastChannelLoggerDeferred").log(babelHelpers["extends"]({},b,{actor_id:d("I64").to_string(g),consistent_thread_fbid:c!=null?d("I64").to_string(c):void 0,ig_thread_id:(b=i)!=null?b:void 0}))});return function(a){return c.apply(this,arguments)}}(),[g,e,i,a]);return f}function h(a){var b=c("useReStore")(),e=d("ReQLSuspense").useFirst(function(){return a==null?d("ReQL").empty():d("ReQL").fromTableAscending(b.table("ig_thread_info")).getKeyRange(a)},[b,a],f.id+":63");return(e=e==null?void 0:e.igThreadId)!=null?e:""}g["default"]=a}),98);
__d("IGDBroadcastChannelLoggingShapes",[],(function(a,b,c,d,e,f){"use strict";a={action:"tap",event:"message_options_rendered",parent_surface:"broadcast",source:"message_options_dot_menu",surface:"thread_view"};b={action:"tap",event:"end_chat_dialog_rendered",parent_surface:"broadcast",source:"end_chat_cta_button",surface:"thread_details"};c={action:"tap",event:"thread_end_successful",parent_surface:"broadcast",source:"end_chat",surface:"thread_details"};d={action:"tap",event:"thread_end_attempt",parent_surface:"broadcast",source:"end_chat_dialog",surface:"thread_details"};e={action:"tap",event:"thread_end_error",parent_surface:"broadcast",source:"end_chat",surface:"thread_details"};var g={action:"tap",event:"thread_end_cancel",parent_surface:"broadcast",source:"end_chat_dialog",surface:"thread_details"},h={action:"view",event:"retrieve_polls_responses_details",parent_surface:"instagram",source:"poll_responses",surface:"thread_view"},i={action:"view",event:"poll_responses_render_error",parent_surface:"instagram",source:"poll_responses",surface:"thread_view"},j={action:"view",event:"poll_responses_render_successful",parent_surface:"instagram",source:"poll_responses",surface:"thread_view"},k={action:"tap",event:"retrieve_message_reactions_details",parent_surface:"instagram",source:"view_reactions_button",surface:"thread_view"},l={action:"view",event:"message_reactions_render_error",parent_surface:"instagram",source:"message_reactions",surface:"thread_view"},m={action:"view",event:"message_reactions_render_successful",parent_surface:"instagram",source:"message_reactions",surface:"thread_view"},n={action:"view",event:"fetch_seen_active_count_error",parent_surface:"instagram",source:"view_seen_active_count",surface:"thread_view"},o={action:"view",event:"fetch_seen_active_count_successful",parent_surface:"instagram",source:"view_seen_active_count",surface:"thread_view"},p={action:"tap",event:"thread_create_attempt",parent_surface:"broadcast",source:"create_broadcast_chat_button",surface:"chat_setup"},q={action:"view",event:"thread_create_successful",parent_surface:"broadcast",source:"create_broadcast_chat",surface:"thread_view"},r={action:"view",event:"thread_create_error",parent_surface:"broadcast",source:"create_broadcast_chat",surface:"chat_setup"},s={action:"view",event:"broadcast_chat_option_viewed",parent_surface:"broadcast",source:"omnipicker_view",surface:"dm_creation_omnipicker"},t={action:"tap",event:"creator_nux_sheet_rendered",parent_surface:"broadcast",source:"create_broadcast_chat_item",surface:"dm_creation_omnipicker"},u={action:"tap",event:"chat_setup_sheet_rendered",parent_surface:"broadcast",source:"create_broadcast_chat_item",surface:"dm_creation_omnipicker"},v={action:"tap",event:"chat_setup_sheet_rendered",parent_surface:"broadcast",source:"get_started_button",surface:"broadcast_chat_creator_nux"},w={action:"impression",event:"exit_chat_setup_sheet",parent_surface:"broadcast",source:"back_button",surface:"chat_setup"};f.MESSAGE_OPTIONS_RENDERED_SHAPE=a;f.END_CHAT_DIALOG_RENDERED_SHAPE=b;f.THREAD_END_SUCCESSFUL_SHAPE=c;f.THREAD_END_ATTEMPT_SHAPE=d;f.THREAD_END_ERROR_SHAPE=e;f.THREAD_END_CANCEL_SHAPE=g;f.POLL_DETAIL_DIALOG_RENDERED_SHAPE=h;f.POLL_DETAIL_DIALOG_RESPONSE_FETCH_FAILED_SHAPE=i;f.POLL_DETAIL_DIALOG_RESPONSE_FETCH_SUCCESSFUL_SHAPE=j;f.REACTIONS_FOOTER_BUTTON_CLICK_SHAPE=k;f.REACTIONS_DIALOG_RESPONSE_FETCH_FAILED_SHAPE=l;f.REACTIONS_DIALOG_RESPONSE_FETCH_SUCCESSFUL_SHAPE=m;f.SEEN_COUNT_RESPONSE_FETCH_FAILED_SHAPE=n;f.SEEN_COUNT_RESPONSE_FETCH_SUCCESSFUL_SHAPE=o;f.CREATE_BROADCAST_CHANNEL_ATTEMPT_SHAPE=p;f.CREATE_BROADCAST_CHANNEL_SUCCESS_SHAPE=q;f.BROADCAST_CHANNEL_SUCCESS_FAILURE_SHAPE=r;f.BROADCAST_CHAT_OPTION_VIEWED_SHAPE=s;f.CREATOR_NUX_SHEET_RENDERED_SHAPE=t;f.CHAT_SETUP_SHEET_RENDERED_SHAPE=u;f.CHAT_SETUP_SHEET_RENDERED_FROM_NUX_SHAPE=v;f.EXIT_CHAT_SETUP_SHEET_SHAPE=w}),66);
__d("LSMessagingInitiatingSource",[],(function(a,b,c,d,e,f){a=Object.freeze({FACEBOOK_CHAT:0,FACEBOOK_INBOX:1,ROOMS_SIDE_CHAT:2,FACEBOOK_FULLSCREEN:3,NONE:4});f["default"]=a}),66);
__d("useLSMessagingInitiatingSource",["LSIntEnum","LSMessagingInitiatingSource","MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();if(a==null)return;else if(a==="Inbox")return d("LSIntEnum").ofNumber(c("LSMessagingInitiatingSource").FACEBOOK_INBOX);else if(a==="FullscreenChat")return d("LSIntEnum").ofNumber(c("LSMessagingInitiatingSource").FACEBOOK_FULLSCREEN);else if(a==="ChatTab")return d("LSIntEnum").ofNumber(c("LSMessagingInitiatingSource").FACEBOOK_CHAT);else return d("LSIntEnum").ofNumber(c("LSMessagingInitiatingSource").ROOMS_SIDE_CHAT)}g["default"]=a}),98);
__d("MWVersion.bs",["I64"],(function(a,b,c,d,e,f,g){"use strict";a=d("I64").of_string("2");g.v2=a}),98);
__d("MWChatMessageId",["I64"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a.type==="sent")return a.value.messageId}function b(a){if(a.type==="sent")return a.value.threadId}function c(a){if(a.type==="sent")return a.value.timestamp}function e(a,b,c){return{type:"sent",value:{messageId:b,threadId:d("I64").of_string(a),timestamp:d("I64").of_string(c)}}}function f(a){return{type:"sent",value:{messageId:a,threadId:d("I64").zero,timestamp:d("I64").zero}}}var h={type:"sent",value:{messageId:"",threadId:d("I64").zero,timestamp:d("I64").zero}};g.getMessageId=a;g.getThreadId=b;g.getTimestamp=c;g.makeSent=e;g.emptyForExamplesWithId=f;g.emptyForExamples=h}),98);
__d("MWGetOriginalEntrypoint",["I64","InteractionTracingMetrics","LSMessagingInitiatingSource","MWChatInteraction.bs"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e=d("MWChatInteraction.bs").get(d("I64").to_string(a));e=e!=null?c("InteractionTracingMetrics").get(e):null;return b!=null&&d("I64").to_int32(b)===c("LSMessagingInitiatingSource").FACEBOOK_INBOX?h(e,a):i(e,a)}function h(a,b){a=a==null?void 0:(a=a.annotations.string)==null?void 0:a.inboxEntrypoint;if(a!=null)return a;a=d("MWChatInteraction.bs").get("inbox_init");return a!=null&&d("I64").equal(b,d("I64").of_string(a))?"initInbox":"unknownInbox"}function i(a,b){a=a==null?void 0:(a=a.annotations.string)==null?void 0:a.entrypoint;if(a!=null)return a;a=d("MWChatInteraction.bs").get(d("MWChatInteraction.bs").MW_AUTO_CHAT_TAB_OPEN);a=a!=null?c("InteractionTracingMetrics").get(a):null;a=(a==null?void 0:(a=a.annotations.string)==null?void 0:a.thread_id)===d("I64").to_string(b);return a?"auto_open":"unknown"}g["default"]=a}),98);
__d("useMWSendToSentQPLLogger",["QPLUserFlow","Random","qpl","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function a(){var a=c("qpl")._(25313175,"1551");return h(function(){return{addSendToSentAnnotations:function(b,d){c("QPLUserFlow").addAnnotations(a,d,{instanceKey:b})},markSendToSentFail:function(b,d){c("QPLUserFlow").endFailure(a,d.name,{error:d,instanceKey:b})},markSendToSentPoint:function(b,d,e){c("QPLUserFlow").addPoint(a,d,{debugInfo:e,instanceKey:b})},markSendToSentStart:function(){var b=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);c("QPLUserFlow").start(a,{instanceKey:b});return b},markSendToSentSuccess:function(b){c("QPLUserFlow").endSuccess(a,{instanceKey:b})}}},[a])}g["default"]=a}),98);
__d("MWLinkRegex",[],(function(a,b,c,d,e,f){"use strict";function a(){var a="(?:(?:[a-z]+:)?//)?",b="(?:\\S+(?::\\S*)?@)?",c="(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)",d="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",e="(?:\\.(?:((?:[a-z\\u00a1-\\uffff]{2,}))))\\.?",f="(?::\\d{2,5})?",g='(?:[/?#][^\\s"]*)?';a="(?:"+a+"|www\\.)"+b+"(?:localhost|"+c+d+e+")"+f+g;return new RegExp(a,"ig")}function b(){var a="(^|)[^@\\s]+@[^@]+[.][^@\\s]+(?!\\S)";return new RegExp(a,"ig")}f.getLinkRegex=a;f.getEmailRegex=b}),66);
__d("MWMsgMediaTypeLogUtils",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum")({Application:"application",Audio:"audio",Avatar:"avatar",HotEmoji:"hot_emoji",File:"file",Gif:"gif",Image:"image",Link:"link",None:"none",Poll:"poll",Reaction:"reaction",Sticker:"sticker",Video:"video"});function a(a){var b=a.hasFile;b=b===void 0?!1:b;var c=a.hasGif;c=c===void 0?!1:c;var d=a.hasHotEmoji;d=d===void 0?!1:d;var e=a.hasImage;e=e===void 0?!1:e;var f=a.hasLinks;f=f===void 0?!1:f;var h=a.hasSticker;h=h===void 0?!1:h;var i=a.hasVideo;i=i===void 0?!1:i;a=a.hasVoiceClip;a=a===void 0?!1:a;var j=g.None;e?j=g.Image:i?j=g.Video:h?j=g.Sticker:c?j=g.Gif:a?j=g.Audio:d?j=g.HotEmoji:f?j=g.Link:b&&(j=g.File);return j}f.AttachmentType=g;f.getAttachmentType=a}),66);
__d("MWSharedMsgLogUtils",["$InternalEnum","CometMessengerState","I64","LSMessagingThreadTypeUtil","MAWEBSwitch","MWGetOriginalEntrypoint","MWLinkRegex","MWMsgMediaTypeLogUtils","MWVersion.bs","MultipleTabsLogger","URLMatcher","asyncToGeneratorRuntime","cr:6277","gkx","isStringNullOrEmpty","promiseDone","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({Send:"send",Reply:"reply",Forward:"forward",Share:"share",StoryReply:"story-reply"}),i=b("$InternalEnum")({Text:"text",NonText:"non-text"});function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){e.hasAttachment;var g=e.hasReply,j=e.hasStoryReply,k=e.hasText;e=babelHelpers.objectWithoutPropertiesLoose(e,["hasAttachment","hasReply","hasStoryReply","hasText"]);var l=h.Send;g?l=h.Reply:j&&(l=h.StoryReply);g=d("MWMsgMediaTypeLogUtils").getAttachmentType(e);j=k&&(!g||g===d("MWMsgMediaTypeLogUtils").AttachmentType.None)?i.Text:i.NonText;e=!1;b("cr:6277")!=null&&(e=(yield b("cr:6277").isCutoverThreadKey(a.threadKey)));return{bool:{is_cutover:e,is_eb_enabled:c("MAWEBSwitch").isEnabled(),is_message_request:d("LSMessagingThreadTypeUtil").isMessageRequest(a),is_pdb_enabled:Boolean(c("gkx")("6543")),is_secure:d("LSMessagingThreadTypeUtil").isSecure(a.threadType),use_maw_shared_worker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()},string:{action_type:l,attachment_type:g,hasMultipleTabs:yield d("MultipleTabsLogger").getMultipleTabsAnnotation(),lockError:yield d("CometMessengerState").lockError(),message_type:j,mw_version:d("I64").to_string(d("MWVersion.bs").v2),original_entrypoint:c("MWGetOriginalEntrypoint")(a.threadKey,f),thread_id:d("I64").to_string(a.threadKey),thread_subtype:a.threadSubtype!=null?d("I64").to_string(a.threadSubtype):null,thread_type:d("I64").to_string(a.threadType)}}});return j.apply(this,arguments)}function e(a,e,f,g){var j=e.hasFile;j=j===void 0?!1:j;var k=e.hasGif;k=k===void 0?!1:k;var l=e.hasHotEmoji;l=l===void 0?!1:l;var m=e.hasImage;m=m===void 0?!1:m;var n=e.hasLinks;n=n===void 0?!1:n;var o=e.hasReply;o=o===void 0?!1:o;var p=e.hasSticker;p=p===void 0?!1:p;var q=e.hasStoryReply;q=q===void 0?!1:q;var r=e.hasText;r=r===void 0?!1:r;var s=e.hasVideo;s=s===void 0?!1:s;e=e.hasVoiceClip;e=e===void 0?!1:e;var t=h.Send;o?t=h.Reply:q&&(t=h.StoryReply);o=d("MWMsgMediaTypeLogUtils").getAttachmentType({hasFile:j,hasGif:k,hasHotEmoji:l,hasImage:m,hasLinks:n,hasSticker:p,hasVideo:s,hasVoiceClip:e});q=r&&(!o||o===d("MWMsgMediaTypeLogUtils").AttachmentType.None)?i.Text:i.NonText;d("MultipleTabsLogger").addAnnotationWithInteractionUuid(a.getTraceId());a.addAnnotation("attachment_type",o);a.addAnnotation("action_type",t);a.addAnnotation("message_type",q);a.addAnnotation("original_entrypoint",c("MWGetOriginalEntrypoint")(f.threadKey,g));a.addAnnotation("thread_id",d("I64").to_string(f.threadKey));a.addAnnotation("thread_type",d("I64").to_string(f.threadType));f.threadSubtype!=null&&a.addAnnotation("thread_subtype",d("I64").to_string(f.threadSubtype));b("cr:6277")!=null&&c("promiseDone")(b("cr:6277").isCutoverThreadKey(f.threadKey),function(b){a.addAnnotationBoolean("is_cutover",b)});a.addAnnotationBoolean("is_secure",d("LSMessagingThreadTypeUtil").isSecure(f.threadType));a.addAnnotationBoolean("is_eb_enabled",c("MAWEBSwitch").isEnabled());a.addAnnotationBoolean("use_maw_shared_worker",d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker());a.addAnnotationBoolean("is_pdb_enabled",Boolean(c("gkx")("6543")))}function f(a,b,e,f,g,h,i){var j=!c("isStringNullOrEmpty")(a),k=!1;a!=null&&c("URLMatcher").multiMatchToPattern(a,d("MWLinkRegex").getLinkRegex()).length>0&&c("URLMatcher").multiMatchToPattern(a,d("MWLinkRegex").getEmailRegex()).length===0&&(k=!0);a=!1;h=h!=null;h?a=!0:g!=null&&(a=!0);var l=!1,m=!1,n=!1;if(i!=null&&i.length>0){a=!0;for(i of i){var o=i.mimeType;o.indexOf("image")!==-1&&(l=!0);o.indexOf("video")!==-1&&(m=!0);o.indexOf("application")!==-1&&(n=!0)}}o=b!=null;i=e!=null;b=e!=null;e=f!=null;f=!e&&g!=null;return{hasAttachment:a,hasFile:n,hasGif:f,hasHotEmoji:o,hasImage:l,hasLinks:k,hasReply:i,hasSticker:e,hasStoryReply:b,hasText:j,hasVideo:m,hasVoiceClip:h}}g.ActionType=h;g.MsgType=i;g.getSendToSentAnnotations=a;g.addSendMessageMetadataForInteractionTrace=e;g.getMessageTypeParams=f}),98);
__d("IGDSEmoji.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.emoji;a=a.fontSize;return h.jsx("span",{className:"x15yrdiy",style:a!=null?{fontSize:a}:void 0,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("Clipboard",["Promise","UserAgent"],(function(a,b,c,d,e,f,g){var h;function a(){return window.document&&window.document.queryCommandSupported instanceof Function&&window.document.queryCommandSupported("copy")&&!(c("UserAgent").isBrowser("Firefox < 41")||c("UserAgent").isPlatform("iOS < 10.3"))||c("UserAgent").isBrowser("Chrome >= 43")}function i(a,b){b=b||document.body;if(!b)return!1;var d=document.activeElement,e=!0,f=document.createElement("textarea");b.appendChild(f);f.value=a;if(c("UserAgent").isPlatform("iOS >= 10.3")){a=document.createRange();a.selectNodeContents(f);var g=window.getSelection();g.removeAllRanges();g.addRange(a);f.setSelectionRange(0,999999)}else f.select();try{e=document.execCommand("copy")}catch(a){e=!1}b.removeChild(f);d!=null&&d.focus();return e}function d(a){var c=window.navigator;if(c&&c.clipboard&&typeof c.clipboard.writeText==="function")return c.clipboard.writeText(a);return i(a)?(h||(h=b("Promise"))).resolve():(h||(h=b("Promise"))).reject()}g.isSupported=a;g.copy=i;g.copyAsync=d}),98);
__d("LSMessageReplySourceType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,LIGHTWEIGHT_STATUS:6,LIGHTWEIGHT_STATUS_REACTION:7,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16});f["default"]=a}),66);
__d("MessagePowerUp",[],(function(a,b,c,d,e,f){a=Object.freeze({AVATAR_LOVE:1e3,AVATAR_ANGER:1001,AVATAR_LAUGH:1002,AVATAR_CRY:1003,NONE:0,LOVE:1,GIFT_WRAP:2,CELEBRATION:3,FIRE:4});f["default"]=a}),66);
__d("LSMediaUrl.bs",["I64","LSMediaUrlUtils","rewriteFallbackUrl"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.previewUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.previewUrlFallback):a.previewUrl}function b(a){var b=a.previewUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.previewUrlFallback):a.previewUrlLarge}function e(a){var b=a.playableUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.playableUrlFallback):a.playableUrl}function f(a){var b=a.imageUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.imageUrlFallback):a.imageUrl}function h(a){var b=a.faviconUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.faviconUrlFallback):a.faviconUrl}function i(a){try{var b=a.listItemContactUrlExpirationTimestampList1;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(d("I64").of_string(b))?c("rewriteFallbackUrl")(a.listItemContactUrlFallbackList1):a.listItemContactUrlList1}catch(b){return a.listItemContactUrlList1}}function j(a){try{var b=a.listItemContactUrlExpirationTimestampList2;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(d("I64").of_string(b))?c("rewriteFallbackUrl")(a.listItemContactUrlFallbackList2):a.listItemContactUrlList2}catch(b){return a.listItemContactUrlList2}}function k(a){try{var b=a.listItemContactUrlExpirationTimestampList3;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(d("I64").of_string(b))?c("rewriteFallbackUrl")(a.listItemContactUrlFallbackList3):a.listItemContactUrlList3}catch(b){return a.listItemContactUrlList3}}function l(a){var b=a.headerImageUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.headerImageUrlFallback):a.headerImageUrl}function m(a){try{var b=a.listItemProfilePictureUrlExpirationTimestamp1;if(b!=null&&d("LSMediaUrlUtils").isTimestampExpired(d("I64").of_string(b)))return c("rewriteFallbackUrl")(a.listItemProfilePictureUrlFallback1);else return a.listItemProfilePictureUrl1}catch(b){return a.listItemProfilePictureUrl1}}function n(a){try{var b=a.listItemProfilePictureUrlExpirationTimestamp2;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(d("I64").of_string(b))?c("rewriteFallbackUrl")(a.listItemProfilePictureUrlFallback2):a.listItemProfilePictureUrl2}catch(b){return a.listItemProfilePictureUrl2}}function o(a){try{var b=a.listItemProfilePictureUrlExpirationTimestamp3;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(d("I64").of_string(b))?c("rewriteFallbackUrl")(a.listItemProfilePictureUrlFallback3):a.listItemProfilePictureUrl3}catch(b){return a.listItemProfilePictureUrl3}}h={faviconUrl:h,headerImageUrl:l,imageUrl:f,listItemContactUrlList1:i,listItemContactUrlList2:j,listItemContactUrlList3:k,listItemProfilePictureUrl1:m,listItemProfilePictureUrl2:n,listItemProfilePictureUrl3:o,playableUrl:e,previewUrl:a,previewUrlLarge:b};function p(a){var b=a.previewUrlExpirationTimestampMs;if(b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b))return c("rewriteFallbackUrl")(a.previewUrlFallback);else return a.previewUrl}function q(a){var b=a.previewUrlExpirationTimestampMs;if(b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b))return c("rewriteFallbackUrl")(a.previewUrlFallback);else return a.previewUrlLarge}function r(a){var b=a.playableUrlExpirationTimestampMs;if(b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b))return c("rewriteFallbackUrl")(a.playableUrlFallback);else return a.playableUrl}function s(a){var b=a.faviconUrlExpirationTimestampMs;if(b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b))return c("rewriteFallbackUrl")(a.faviconUrlFallback);else return a.faviconUrl}l={faviconUrl:s,playableUrl:r,previewUrl:p,previewUrlLarge:q};g.Attachment=h;g.AttachmentItem=l}),98);/*FB_PKG_DELIM*/
__d("useIsThreadBlocked",["I64","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","MWPActor.react","MWThreadKey.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useReStore")(),b=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),e=d("MWPActor.react").useActor(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.table("threads")).getKeyRange(b)},[a,b],f.id+":30"),h=d("ReQLSuspense").useFirst(function(){return(g==null?void 0:g.threadKey)!=null&&(g==null?void 0:g.threadType)!=null&&d("LSMessagingThreadTypeUtil").isOneToOne(g==null?void 0:g.threadType)?d("ReQL").leftJoin(d("ReQL").fromTableAscending(a.table("participants")).getKeyRange(b).filter(function(a){return!d("I64").equal(a.contactId,e)}).take(1),d("ReQL").fromTableAscending(a.table("contacts"))).map(function(a){a[0];a=a[1];return a}):d("ReQL").empty()},[a,b],f.id+":35");if(h!=null)return!d("I64").equal(h.blockedByViewerStatus,d("LSIntEnum").ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED));else return!1}g["default"]=a}),98);
__d("LSFeatureLimitsType",[],(function(a,b,c,d,e,f){a=Object.freeze({READ_ONLY:1,GENERIC_READ_ONLY_BLOCK:2,MESSAGE_SEND:4,MESSENGER_ONLY_ACCOUNTS_READ_ONLY_BLOCK:8,MESSAGE_SEND_PRIVATE:16,MESSAGE_SEND_PUBLIC:32});f["default"]=a}),66);
__d("MWPFeatureLimitedData",["I64","LSFeatureLimitsType","LSIntEnum","LSMessagingThreadTypeUtil","ReQL","ReQLSuspense","ServerTime","gkx","useReStore","useServerTime"],(function(a,b,c,d,e,f,g){"use strict";var h=[d("LSIntEnum").ofNumber(c("LSFeatureLimitsType").READ_ONLY),d("LSIntEnum").ofNumber(c("LSFeatureLimitsType").GENERIC_READ_ONLY_BLOCK),d("LSIntEnum").ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND)];function i(a){for(var b=0;b<h.length;b++){var c=h[b];if(d("I64").equal(c,a.type_))return!0}return!1}function j(a,b){return d("I64").equal(d("LSIntEnum").ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PUBLIC),a.type_)&&d("LSMessagingThreadTypeUtil").isPublicCMThread(b)&&c("gkx")("9277")}function k(a,b){return d("I64").equal(d("LSIntEnum").ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PRIVATE),a.type_)&&d("LSMessagingThreadTypeUtil").isPrivateThread(b)&&c("gkx")("9278")}var l=function(a){var b=d("I64").of_float(d("ServerTime").getMillis()/1e3);return d("ReQL").fromTableAscending(a.table("feature_limits")).filter(function(a){return i(a)&&d("I64").gt(a.expirationTimestampSeconds,b)})},m=function(a,b){var e=d("I64").of_float(c("useServerTime")().valueOf()/1e3);return d("ReQL").fromTableAscending(a.table("feature_limits")).filter(function(a){return(b!=null?i(a)||j(a,b)||k(a,b):i(a))&&d("I64").gt(a.expirationTimestampSeconds,e)})};function a(){var a=c("useReStore")();return d("ReQLSuspense").useFirst(function(){return l(a)},[a],f.id+":116")}function b(a){var b=c("useReStore")(),e=m(b,a);return d("ReQLSuspense").useFirst(function(){return e},[e],f.id+":125")}g.readonlyFeatureLimitQuery=l;g.useReadOnlyFeatureLimitData=a;g.useReadOnlyFeatureLimitDataWithThreadType=b}),98);
__d("useIsReadOnlyFeatureLimited",["MWPFeatureLimitedData","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWPFeatureLimitedData").useReadOnlyFeatureLimitData();if(a!=null)return c("gkx")("1908348");else return!1}g["default"]=a}),98);
__d("MWPMessageHasAttachment",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(!d("I64").equal(a.displayedContentTypes,d("LSIntEnum").ofNumber(1))&&!d("I64").equal(a.displayedContentTypes,d("I64").add(d("LSIntEnum").ofNumber(1),d("LSIntEnum").ofNumber(8192)))&&!d("I64").equal(a.displayedContentTypes,d("LSIntEnum").ofNumber(128))&&!d("I64").equal(a.displayedContentTypes,d("I64").add(d("LSIntEnum").ofNumber(128),d("LSIntEnum").ofNumber(8192))))return!d("I64").equal(a.displayedContentTypes,d("I64").add(d("LSIntEnum").ofNumber(1),d("LSIntEnum").ofNumber(512)));else return!1}g["default"]=a}),98);
__d("MWPReplyContext.react",["I64","emptyFunction","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");e=b.createContext;var i=b.useCallback,j=b.useMemo,k=b.useState,l=c("requireDeferred")("MWPReplyLogging").__setRef("MWPReplyContext.react"),m=e({clearReply:c("emptyFunction"),reply:void 0,setReply:c("emptyFunction")});function n(a){try{return JSON.parse(a)}catch(a){return}}function a(a){var b=a.children,c=a.clearThreadReply,e=a.getRepliesState,f=a.persistRepliesState,g=a.senderId;a=a.threadKey;e=e!=null&&a!=null?n(e(d("I64").to_string(a))):void 0;a=k(e);var o=a[0],p=a[1],q=i(function(a,b){l.onReady(function(c){c.logClearReply(b,a,o!=null)});p();if(c!=null)return c(d("I64").to_string(a))},[c,o]),r=i(function(a,b){l.onReady(function(c){c.logSetReply(o,a,b)});p(a);if(f!=null)return f({messageId:a.messageId,offlineThreadingId:a.offlineThreadingId,senderId:g,sendStatusV2:a.sendStatusV2,threadKey:d("I64").to_string(b),timestampMs:a.timestampMs})},[f,o,g]);e=j(function(){return{clearReply:q,reply:o,setReply:r}},[o,r,q]);return h.jsx(m.Provider,{value:e,children:b})}a.displayName=a.name+" [from "+f.id+"]";g.MWPReplyContext=m;g.MWPReplyContextProvider=a}),98);
__d("EmojiRendererData",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}a.isEmoji=function(a){return a>983041||a<35?!1:a===35||a===42||a>=48&&a<=57||a===169||a===174||a===8205||a===8252||a===8265||a===8419||a===8482||a===8505||a>=8596&&a<=8601||a>=8617&&a<=8618||a>=8986&&a<=8987||a===9e3||a===9167||a>=9193&&a<=9203||a>=9208&&a<=9210||a===9410||a>=9642&&a<=9643||a===9654||a===9664||a>=9723&&a<=9726||a>=9728&&a<=9732||a===9742||a===9745||a>=9748&&a<=9749||a===9752||a===9760||a>=9762&&a<=9763||a===9766||a===9770||a>=9774&&a<=9775||a>=9784&&a<=9786||a===9792||a===9794||a>=9800&&a<=9811||a>=9823&&a<=9824||a===9827||a>=9829&&a<=9830||a===9832||a===9851||a>=9854&&a<=9855||a>=9874&&a<=9879||a===9881||a>=9883&&a<=9884||a>=9888&&a<=9889||a===9895||a>=9898&&a<=9899||a>=9904&&a<=9905||a>=9917&&a<=9918||a>=9924&&a<=9925||a===9928||a>=9934&&a<=9935||a===9937||a>=9939&&a<=9940||a>=9961&&a<=9962||a>=9968&&a<=9973||a>=9975&&a<=9976||a===9978||a===9981||a===9986||a===9989||a>=9992&&a<=9993||a===9999||a===10002||a===10004||a===10006||a===10013||a===10017||a===10024||a>=10035&&a<=10036||a===10052||a===10055||a===10060||a===10062||a>=10067&&a<=10069||a===10071||a>=10083&&a<=10084||a>=10133&&a<=10135||a===10145||a===10160||a===10175||a>=10548&&a<=10549||a>=11013&&a<=11015||a>=11035&&a<=11036||a===11088||a===11093||a===12336||a===12349||a===12951||a===12953||a===126980||a===127183||a>=127344&&a<=127345||a>=127358&&a<=127359||a===127374||a>=127377&&a<=127386||a>=127462&&a<=127487||a>=127489&&a<=127490||a===127514||a===127535||a>=127538&&a<=127546||a>=127568&&a<=127569||a>=127744&&a<=127777||a>=127780&&a<=127876||a>=127878&&a<=127891||a>=127894&&a<=127895||a>=127897&&a<=127899||a>=127902&&a<=127937||a>=127941&&a<=127942||a>=127944&&a<=127945||a>=127949&&a<=127984||a>=127987&&a<=127989||a>=127991&&a<=127994||a>=128e3&&a<=128065||a>=128068&&a<=128069||a>=128081&&a<=128101||a>=128121&&a<=128123||a>=128125&&a<=128128||a===128132||a>=128136&&a<=128142||a===128144||a>=128146&&a<=128169||a>=128171&&a<=128253||a>=128255&&a<=128317||a>=128329&&a<=128334||a>=128336&&a<=128359||a>=128367&&a<=128368||a===128371||a>=128374&&a<=128377||a===128391||a>=128394&&a<=128397||a>=128420&&a<=128421||a===128424||a>=128433&&a<=128434||a===128444||a>=128450&&a<=128452||a>=128465&&a<=128467||a>=128476&&a<=128478||a===128481||a===128483||a===128488||a===128495||a===128499||a>=128506&&a<=128580||a>=128584&&a<=128586||a>=128640&&a<=128674||a>=128676&&a<=128691||a>=128695&&a<=128703||a>=128705&&a<=128709||a===128715||a>=128717&&a<=128722||a>=128725&&a<=128727||a>=128732&&a<=128741||a===128745||a>=128747&&a<=128748||a===128752||a>=128755&&a<=128764||a>=128992&&a<=129003||a===129008||a>=129293&&a<=129294||a>=129296&&a<=129303||a>=129312&&a<=129317||a>=129319&&a<=129327||a===129338||a>=129343&&a<=129349||a>=129351&&a<=129398||a>=129400&&a<=129460||a===129463||a===129466||a>=129468&&a<=129484||a===129488||a>=129502&&a<=129535||a>=129648&&a<=129660||a>=129664&&a<=129672||a>=129680&&a<=129725||a>=129727&&a<=129730||a>=129742&&a<=129755||a>=129760&&a<=129768||a>=917536&&a<=917631||a>=983040&&a<=983041};a.isEmojiModifier=function(a){return a>127999||a<127995?!1:a>=127995&&a<=127999};a.isEmojiModifierBase=function(a){return a>129784||a<9757?!1:a===9757||a===9977||a>=9994&&a<=9997||a===127877||a>=127938&&a<=127940||a===127943||a>=127946&&a<=127948||a>=128066&&a<=128067||a>=128070&&a<=128080||a>=128102&&a<=128120||a===128124||a>=128129&&a<=128131||a>=128133&&a<=128135||a===128143||a===128145||a===128170||a>=128372&&a<=128373||a===128378||a===128400||a>=128405&&a<=128406||a>=128581&&a<=128583||a>=128587&&a<=128591||a===128675||a>=128692&&a<=128694||a===128704||a===128716||a===129292||a===129295||a>=129304&&a<=129311||a===129318||a>=129328&&a<=129337||a>=129340&&a<=129342||a===129399||a>=129461&&a<=129462||a>=129464&&a<=129465||a===129467||a>=129485&&a<=129487||a>=129489&&a<=129501||a>=129731&&a<=129733||a>=129776&&a<=129784};a.isEmojiVariationSelector=function(a){return a===65039};a.isNonSpacingCombiningMark=function(a){return a>8419||a<8416?!1:a===8416||a===8419};a.isRegionalIndicator=function(a){return a>127487||a<127462?!1:a>=127462&&a<=127487};a.isTagSpec=function(a){return a>917630||a<917536?!1:a>=917536&&a<=917568||a>=917595&&a<=917630};a.isTagTerm=function(a){return a===917631};a.isText=function(a){return a>8419||a<35?!1:a===35||a===42||a>=48&&a<=57||a===8419};a.isTextVariationSelector=function(a){return a===65038};a.isDefaultTextPresentation=function(a){return a>917631||a<35?!1:a===35||a===42||a>=48&&a<=57||a===169||a===174||a===8205||a===8252||a===8265||a===8419||a===8482||a===8505||a>=8596&&a<=8597||a>=8617&&a<=8618||a===9e3||a===9167||a>=9197&&a<=9199||a>=9201&&a<=9202||a>=9208&&a<=9210||a===9410||a===9654||a===9664||a>=9730&&a<=9732||a===9745||a===9752||a===9760||a>=9762&&a<=9763||a===9766||a===9770||a>=9774&&a<=9775||a>=9784&&a<=9785||a===9792||a===9794||a===9823||a===9851||a===9854||a===9874||a>=9876&&a<=9879||a===9881||a>=9883&&a<=9884||a===9895||a>=9904&&a<=9905||a===9928||a===9935||a===9937||a===9939||a===9961||a>=9968&&a<=9969||a===9972||a>=9975&&a<=9977||a===9997||a===9999||a===10002||a===10004||a===10013||a===10017||a===10052||a===10055||a===10083||a===12336||a>=127344&&a<=127345||a>=127358&&a<=127359||a===127777||a>=127780&&a<=127788||a===127798||a===127869||a>=127894&&a<=127895||a>=127897&&a<=127899||a>=127902&&a<=127903||a>=127947&&a<=127950||a>=127956&&a<=127967||a===127987||a===127989||a===127991||a===128063||a===128065||a===128253||a>=128329&&a<=128330||a>=128367&&a<=128368||a>=128371&&a<=128377||a===128391||a>=128394&&a<=128397||a===128400||a===128421||a===128424||a>=128433&&a<=128434||a===128444||a>=128450&&a<=128452||a>=128465&&a<=128467||a>=128476&&a<=128478||a===128481||a===128483||a===128488||a===128495||a===128499||a===128506||a===128715||a>=128717&&a<=128719||a>=128736&&a<=128741||a===128745||a===128752||a===128755||a>=917536&&a<=917631};a.isSymbol=function(a){return a>8482||a<169?!1:a===169||a===174||a===8482};a.isZWJ=function(a){return a===8205};return a}();e.exports=a}),null);
__d("UnicodeUtils",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";var i=55296,j=56319,k=56320,l=57343,m=/[\uD800-\uDFFF]/;function n(a){return i<=a&&a<=l}function a(a,b){0<=b&&b<a.length||h(0,1346,b,a.length);if(b+1===a.length)return!1;var c=a.charCodeAt(b);a=a.charCodeAt(b+1);return i<=c&&c<=j&&k<=a&&a<=l}function o(a){return m.test(a)}function p(a,b){return 1+n(a.charCodeAt(b))}function b(a){if(!o(a))return a.length;var b=0;for(var c=0;c<a.length;c+=p(a,c))b++;return b}function c(a,b){return r(a,b,b+1)}function q(a,b,c){var d=b||0;c=c===void 0?Infinity:c||0;if(!o(a))return a.substr(d,c);var e=a.length;if(e<=0||d>e||c<=0)return"";var f=0;if(d>0){for(;d>0&&f<e;d--)f+=p(a,f);if(f>=e)return""}else if(b<0){for(f=e;d<0&&0<f;d++)f-=p(a,f-1);f<0&&(f=0)}b=e;if(c<e)for(b=f;c>0&&b<e;c--)b+=p(a,b);return a.substring(f,b)}function r(a,b,c){b=b||0;c=c===void 0?Infinity:c||0;b<0&&(b=0);c<0&&(c=0);var d=Math.abs(c-b);b=b<c?b:c;return q(a,b,d)}function d(a){var b=[];for(var c=0;c<a.length;c+=p(a,c))b.push(a.codePointAt(c));return b}g.isCodeUnitInSurrogateRange=n;g.isSurrogatePair=a;g.hasSurrogateUnit=o;g.getUTF16Length=p;g.strlen=b;g.charAt=c;g.substr=q;g.substring=r;g.getCodePoints=d}),98);
__d("EmojiRenderer",["EmojiRendererData","UnicodeUtils"],(function(a,b,c,d,e,f,g){var h=0,i=1,j=2,k=3,l=4,m=5,n=6,o=7,p=8,q=9,r=10,s=11;function t(a){var b=a[0];if(b===void 0)return!1;var d=a.length,e=a[d-1];if(e){e=e.charCodeAt(0);if(c("EmojiRendererData").isTagSpec(e))return!1}b=b.charCodeAt(0);if(c("EmojiRendererData").isSymbol(b)&&d<2)return!1;if(c("EmojiRendererData").isText(b))if(d===1)return!1;else if(a.length==2)return c("EmojiRendererData").isNonSpacingCombiningMark(a[1].charCodeAt(0));else{e=1;c("EmojiRendererData").isEmojiVariationSelector(a[e].charCodeAt(0))&&e++;while(e<a.length){if(!c("EmojiRendererData").isNonSpacingCombiningMark(a[e].charCodeAt(0)))return!1;e++}return!0}return!0}function u(a,b){var e=null,f=[],g=p,u=0,v=a.length;while(u<v){var w=a.codePointAt(u),x=d("UnicodeUtils").getUTF16Length(a,u),y=a.substr(u,x);switch(g){case q:c("EmojiRendererData").isRegionalIndicator(w)?g=k:g=p;break;case l:if(c("EmojiRendererData").isEmojiModifier(w)){g=m;break}case h:c("EmojiRendererData").isZWJ(w)?g=o:c("EmojiRendererData").isEmojiVariationSelector(w)?g=j:c("EmojiRendererData").isTextVariationSelector(w)?g=s:c("EmojiRendererData").isNonSpacingCombiningMark(w)?g=i:c("EmojiRendererData").isTagSpec(w)?g=n:g=p;break;case i:case j:if(c("EmojiRendererData").isNonSpacingCombiningMark(w))break;case k:case m:c("EmojiRendererData").isZWJ(w)?g=o:c("EmojiRendererData").isTagSpec(w)?g=n:g=p;break;case n:c("EmojiRendererData").isTagSpec(w)||c("EmojiRendererData").isTagTerm(w)?g=n:g=p;break;case o:c("EmojiRendererData").isRegionalIndicator(w)?g=q:c("EmojiRendererData").isEmojiModifierBase(w)?g=l:c("EmojiRendererData").isEmoji(w)?g=h:g=p;break;case r:c("EmojiRendererData").isNonSpacingCombiningMark(w)?g=i:c("EmojiRendererData").isEmojiVariationSelector(w)?g=j:g=p;break;default:g=p;break}if(g===p){c("EmojiRendererData").isRegionalIndicator(w)?g=q:c("EmojiRendererData").isEmojiModifierBase(w)?g=l:c("EmojiRendererData").isText(w)?g=r:c("EmojiRendererData").isEmoji(w)&&(g=h);if(g!==p){e!==null&&t(e.emoji)&&f.push(e);if(b!==null&&b===f.length){e=null;break}e={emoji:[y],length:x,offset:u}}}else e!==null&&(e.emoji.push(y),e.length+=x);u+=x}e!==null&&t(e.emoji)&&f.push(e);return f}function a(a,b,c){c=u(a);var d=[],e=0;c.forEach(function(c){var f=c.offset;f>e&&d.push(a.substr(e,f-e));var g=b(c.emoji);g!=null&&d.push(g);e=f+c.length});d.push(a.substr(e,a.length-e));return d}function b(a){return u(a,1).length===1}function e(a){return u(a).length}g.parse=u;g.render=a;g.containsEmoji=b;g.countEmoji=e}),98);
__d("ThreadStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_PAUSED:0,PAUSED:1});f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("MDSTextConfig",["UserAgent"],(function(a,b,c,d,e,f,g){"use strict";a={blueLink:{color:"x1fey0fg",$$css:!0},disabled:{color:"x1dntmbh",$$css:!0},disabledButton:{color:"x1x80s81",$$css:!0},highlight:{color:"x1qq9wsj",$$css:!0},negative:{color:"x1a1m0xk",$$css:!0},positive:{color:"x6u5lvz",$$css:!0},primary:{color:"xzsf02u",$$css:!0},primaryButton:{color:"xtk6v10",$$css:!0},primaryDeemphasizedButton:{color:"x1mvi0mv",$$css:!0},secondary:{color:"xi81zsa",$$css:!0},secondaryButton:{color:"x1dem4cn",$$css:!0},secondaryOnMedia:{color:"xkxfvhb",$$css:!0},tertiary:{color:"x12scifz",$$css:!0},white:{color:"x14ctfv",$$css:!0}};var h={apple:{MozOsxFontSmoothing:"xlh3980",WebkitFontSmoothing:"xvmahel",fontFamily:"x1n0sxbx",$$css:!0},"default":{fontFamily:"x10flsy6",$$css:!0},segoe:{fontFamily:"x1xmvt09",$$css:!0}},i={"default":function(a){switch(a){case"body1":return[4,5];case"body2":return[3,5];case"body3":return[4,5];case"body4":return[3,4];case"bodyLink1":return[4,5];case"bodyLink2":return[3,5];case"bodyLink3":return[4,5];case"bodyLink4":return[3,4];case"button1":return[3,5];case"button2":return[4,5];case"entityHeaderHeadline1":return[7,8];case"entityHeaderHeadline2":return[5,7];case"entityHeaderMeta1":return[4,5];case"entityHeaderMeta2":return[4,5];case"entityHeaderMeta3":return[4,3];case"headline3":return[3,5];case"headline4":return[4,5];case"headlineDeemphasized3":return[3,5];case"headlineDeemphasized4":return[4,5];case"headlineEmphasized1":return[5,6];case"headlineEmphasized2":return[4,5];case"headlineEmphasized3":return[3,4];case"headlineEmphasized4":return[4,5];case"headlineEmphasized5":return[3,4];case"meta1":return[3,4];case"meta2":return[3,4];case"meta3":return[3,4];case"meta4":return[3,4]}},segoe:function(a){switch(a){case"body1":return[6,4,1];case"body2":return[5,3,1];case"body3":return[5,4];case"body4":return[4,3,1];case"bodyLink1":return[6,4,1];case"bodyLink2":return[5,3,1];case"bodyLink3":return[5,4];case"bodyLink4":return[4,3,1];case"button1":return[5,3,1];case"button2":return[5,4];case"entityHeaderHeadline1":return[10,6,2];case"entityHeaderHeadline2":return[8,5,3];case"entityHeaderMeta1":return[5,4,1];case"entityHeaderMeta2":return[5,4,1];case"entityHeaderMeta3":return[4,3];case"headline3":return[5,3,1];case"headline4":return[5,4];case"headlineDeemphasized3":return[5,3,1];case"headlineDeemphasized4":return[5,4];case"headlineEmphasized1":return[7,4,2];case"headlineEmphasized2":return[6,4,2];case"headlineEmphasized3":return[5,3,1];case"headlineEmphasized4":return[5,4];case"headlineEmphasized5":return[5,3,1];case"meta1":return[4,3,1];case"meta2":return[4,3,1];case"meta3":return[4,3,1];case"meta4":return[4,3]}},sfGecko:function(a){switch(a){case"body1":return[5,5];case"body2":return[4,4];case"body3":return[5,4];case"body4":return[4,3];case"bodyLink1":return[6,4];case"bodyLink2":return[4,3];case"bodyLink3":return[5,4];case"bodyLink4":return[4,3];case"button1":return[4,3];case"button2":return[5,4];case"entityHeaderHeadline1":return[8,7];case"entityHeaderHeadline2":return[7,5];case"entityHeaderMeta1":return[5,4];case"entityHeaderMeta2":return[5,4];case"entityHeaderMeta3":return[4,3];case"headline3":return[5,3];case"headline4":return[5,4];case"headlineDeemphasized3":return[5,3];case"headlineDeemphasized4":return[5,4];case"headlineEmphasized1":return[6,5];case"headlineEmphasized2":return[6,4];case"headlineEmphasized3":return[4,3];case"headlineEmphasized4":return[5,4];case"headlineEmphasized5":return[4,3];case"meta1":return[4,3];case"meta2":return[4,3];case"meta3":return[4,3];case"meta4":return[4,3]}},sfWebkit:function(a){switch(a){case"body1":return[5,5];case"body2":return[4,4];case"body3":return[4,4];case"body4":return[4,3];case"bodyLink1":return[5,5];case"bodyLink2":return[4,4];case"bodyLink3":return[4,4];case"bodyLink4":return[4,3];case"button1":return[4,4];case"button2":return[4,4];case"entityHeaderHeadline1":return[8,7];case"entityHeaderHeadline2":return[6,6];case"entityHeaderMeta1":return[4,4];case"entityHeaderMeta2":return[4,4];case"entityHeaderMeta3":return[4,3];case"headline3":return[4,4];case"headline4":return[4,4];case"headlineDeemphasized3":return[4,4];case"headlineDeemphasized4":return[4,4];case"headlineEmphasized1":return[6,5];case"headlineEmphasized2":return[5,5];case"headlineEmphasized3":return[4,4];case"headlineEmphasized4":return[4,4];case"headlineEmphasized5":return[4,3];case"meta1":return[4,3];case"meta2":return[4,3];case"meta3":return[4,3];case"meta4":return[3,3]}}};b=function(){if(c("UserAgent").isPlatform("Windows >= 6"))return[h.segoe,i.segoe];return c("UserAgent").isPlatform("Mac OS X >= 10.11")&&!c("UserAgent").isBrowser("Firefox < 55")||c("UserAgent").isPlatform("iOS >= 9")?[h.apple,c("UserAgent").isEngine("Gecko")?i.sfGecko:i.sfWebkit]:[h["default"],i["default"]]}();d=b[0];e=b[1];f={body1:{fontSize:"x1603h9y",fontWeight:"x1fcty0u",$$css:!0},body2:{fontSize:"x1lkfr7t",fontWeight:"x1fcty0u",$$css:!0},body2ForDenseMode:{fontSize:"x1jchvi3",fontWeight:"x1fcty0u",$$css:!0},body3:{fontSize:"x6prxxf",fontWeight:"x1fcty0u",$$css:!0},body3ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1fcty0u",$$css:!0},body4:{fontSize:"x1nxh6w3",fontWeight:"x1fcty0u",$$css:!0},body4ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1fcty0u",$$css:!0},bodyLink1:{fontSize:"x1603h9y",fontWeight:"x1s688f",$$css:!0},bodyLink2:{fontSize:"x1lkfr7t",fontWeight:"x1s688f",$$css:!0},bodyLink2ForDenseMode:{fontSize:"x1jchvi3",fontWeight:"x1s688f",$$css:!0},bodyLink3:{fontSize:"x6prxxf",fontWeight:"x1s688f",$$css:!0},bodyLink3ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1s688f",$$css:!0},bodyLink4:{fontSize:"x1nxh6w3",fontWeight:"x1s688f",$$css:!0},bodyLink4ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1s688f",$$css:!0},button1:{fontSize:"x1lkfr7t",fontWeight:"x1s688f",$$css:!0},button1ForDenseMode:{fontSize:"x1jchvi3",fontWeight:"x1s688f",$$css:!0},button2:{fontSize:"x6prxxf",fontWeight:"x1s688f",$$css:!0},button2ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1s688f",$$css:!0},entityHeaderHeadline1:{fontSize:"x579bpy",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderHeadline2:{fontSize:"x1q74xe4",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderMeta1:{fontSize:"x6prxxf",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderMeta1ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderMeta2:{fontSize:"x6prxxf",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderMeta2ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderMeta3:{fontSize:"x1nxh6w3",fontWeight:"x1xlr1w8",$$css:!0},headline3:{fontSize:"x1lkfr7t",fontWeight:"xk50ysn",$$css:!0},headline3ForDenseMode:{fontSize:"x1jchvi3",fontWeight:"xk50ysn",$$css:!0},headline4:{fontSize:"x6prxxf",fontWeight:"xk50ysn",$$css:!0},headline4ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"xk50ysn",$$css:!0},headlineEmphasized1:{fontSize:"xngnso2",fontWeight:"x1xlr1w8",$$css:!0},headlineEmphasized2:{fontSize:"x1603h9y",fontWeight:"x1xlr1w8",$$css:!0},headlineEmphasized3:{fontSize:"x1lkfr7t",fontWeight:"x1s688f",$$css:!0},headlineEmphasized3ForDenseMode:{fontSize:"x1jchvi3",fontWeight:"x1s688f",$$css:!0},headlineEmphasized4:{fontSize:"x6prxxf",fontWeight:"x1s688f",$$css:!0},headlineEmphasized4ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1s688f",$$css:!0},headlineEmphasized5:{fontSize:"x6prxxf",fontWeight:"xk50ysn",$$css:!0},meta1:{fontSize:"x1nxh6w3",fontWeight:"x1s688f",$$css:!0},meta1ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1s688f",$$css:!0},meta2:{fontSize:"x1nxh6w3",fontWeight:"x1s688f",$$css:!0},meta2ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1s688f",$$css:!0},meta3:{fontSize:"x1nxh6w3",fontWeight:"x1fcty0u",$$css:!0},meta3ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1fcty0u",$$css:!0},meta4:{fontSize:"x1pg5gke",fontWeight:"x1fcty0u",$$css:!0},meta4ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1fcty0u",$$css:!0}};b={colors:{blueLink:a.blueLink,disabled:a.disabled,disabledButton:a.disabledButton,highlight:a.highlight,negative:a.negative,positive:a.positive,primary:a.primary,primaryButton:a.primaryButton,primaryDeemphasizedButton:a.primaryDeemphasizedButton,secondary:a.secondary,secondaryButton:a.secondaryButton,secondaryOnMedia:a.secondaryOnMedia,tertiary:a.tertiary,white:a.white},defaultFontFamily:d,offsets:e,styles:{body1:{lineHeight:24,style:f.body1},body2:{lineHeight:20,style:f.body2},body3:{lineHeight:19.9995,style:f.body3},body4:{lineHeight:16,style:f.body4},bodyLink1:{lineHeight:24,style:f.bodyLink1},bodyLink2:{lineHeight:20,style:f.bodyLink2},bodyLink3:{lineHeight:19.9995,style:f.bodyLink3},bodyLink4:{lineHeight:16,style:f.bodyLink4},button1:{lineHeight:20,style:f.button1},button2:{lineHeight:19.9995,style:f.button2},entityHeaderHeadline1:{lineHeight:38,style:f.entityHeaderHeadline1},entityHeaderHeadline2:{lineHeight:32,style:f.entityHeaderHeadline2},entityHeaderMeta1:{lineHeight:19,style:f.entityHeaderMeta1},entityHeaderMeta2:{lineHeight:19,style:f.entityHeaderMeta2},entityHeaderMeta3:{lineHeight:17,style:f.entityHeaderMeta3},headline3:{lineHeight:20,style:f.headline3},headline4:{lineHeight:19.9995,style:f.headline4},headlineEmphasized1:{lineHeight:28,style:f.headlineEmphasized1},headlineEmphasized2:{lineHeight:24,style:f.headlineEmphasized2},headlineEmphasized3:{lineHeight:20,style:f.headlineEmphasized3},headlineEmphasized4:{lineHeight:19.9995,style:f.headlineEmphasized4},headlineEmphasized5:{lineHeight:20,style:f.headlineEmphasized5},meta1:{lineHeight:16,style:f.meta1},meta2:{lineHeight:16,style:f.meta2},meta3:{lineHeight:16,style:f.meta3},meta4:{lineHeight:15,style:f.meta4}},stylesForDenseMode:{body2:{lineHeight:20,style:f.body2ForDenseMode},body3:{lineHeight:20,style:f.body3ForDenseMode},body4:{lineHeight:16,style:f.body4ForDenseMode},bodyLink2:{lineHeight:20,style:f.bodyLink2ForDenseMode},bodyLink3:{lineHeight:20,style:f.bodyLink3ForDenseMode},bodyLink4:{lineHeight:16,style:f.bodyLink4ForDenseMode},button1:{lineHeight:18,style:f.button1ForDenseMode},button2:{lineHeight:18,style:f.button2ForDenseMode},entityHeaderMeta1:{lineHeight:18,style:f.entityHeaderMeta1ForDenseMode},entityHeaderMeta2:{lineHeight:18,style:f.entityHeaderMeta2ForDenseMode},headline3:{lineHeight:20,style:f.headline3ForDenseMode},headline4:{lineHeight:20,style:f.headline4ForDenseMode},headlineEmphasized3:{lineHeight:20,style:f.headlineEmphasized3ForDenseMode},headlineEmphasized4:{lineHeight:20,style:f.headlineEmphasized4ForDenseMode},meta1:{lineHeight:14,style:f.meta1ForDenseMode},meta2:{lineHeight:14,style:f.meta2ForDenseMode},meta3:{lineHeight:14,style:f.meta3ForDenseMode},meta4:{lineHeight:15,style:f.meta4ForDenseMode}}};a=b;g["default"]=a}),98);
__d("MDSText.web.react",["BaseHeading.react","BaseText.react","BaseTextContext","CometDensityModeContext","MDSTextConfig","cr:2099","react","xplatToDOMRef"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useContext,j=e.useMemo,k=d("BaseText.react").createBaseTextComponent(c("MDSTextConfig"));b=(e=b("cr:2099"))!=null?e:{useTranslationKeyForTextParent:function(){return""}};var l=b.useTranslationKeyForTextParent,m={heading:{maxWidth:"x193iq5w",minWidth:"xeuugli",$$css:!0},text:{whiteSpace:"xq9mrsl",$$css:!0}},n={disabled:"disabledButton",highlight:"primaryDeemphasizedButton",secondary:"secondaryButton",white:"primaryButton"};function o(a,b){return b?(b=n[a])!=null?b:a:a}var p=["entityHeaderMeta1","entityHeaderMeta2","meta1","meta2","meta3","meta4"];function a(a,b){var e=a.align;e=e===void 0?"auto":e;var f=a.children,g=a.color,n=a.dir;n=n===void 0?"auto":n;var q=a.id,r=a.isSemanticHeading;r=r===void 0?!1:r;var s=a.numberOfLines,t=a.testid,u=a.type;t=j(function(){return p.includes(u)?"secondary":"primary"},[u]);g=o((a=g)!=null?a:t,u==="button1"||u==="button2");a=l();t=d("BaseTextContext").useBaseTextContext();var v=i(c("CometDensityModeContext"));v=v[0];t=(t==null?void 0:t.nested)===!0;e=h.jsx(k,{alignment:(e=e)!=null?e:void 0,colorName:g,dir:t?void 0:n,id:q,isDenseModeEnabled:v,lines:s||0,ref:d("xplatToDOMRef").xplatToDOMRef(b),styleName:u,testid:void 0,xstyle:m.text,children:f},a);return r?h.jsx(c("BaseHeading.react"),{isPrimaryHeading:r,xstyle:m.heading,children:e}):e}a.displayName=a.name+" [from "+f.id+"]";e=h.forwardRef(a);e.displayName="MDSText";b=e;g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("LSVerifyThreadExistsV2",["LSGetViewerFBID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return[c.i64.cast([0,7]),c.i64.cast([0,8]),c.i64.cast([0,13]),c.i64.cast([0,10]),c.i64.cast([0,11]),c.i64.cast([0,16])].some(function(b){return c.i64.eq(a[1],b)})?c.resolve((b=[!1,!1,!1],d[0]=b[0],d[1]=b[1],d[2]=b[2],b)):c.seq([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var g=b.done;b=b.value;return g?(g=[!0,!0,!1],d[3]=g[0],d[4]=g[1],d[5]=g[2],g):(e=b.item,d[12]=e.threadName,d[11]=e.authorityLevel,d[10]=e.threadType,e.folderName==="other"?(g=[!0,!1,!1],d[7]=g[0],d[8]=g[1],d[9]=g[2],g):(c.i64.eq(d[10],c.i64.cast([0,0]))&&c.i64.eq(d[11],c.i64.cast([0,40]))||[c.i64.cast([0,23]),c.i64.cast([0,21]),c.i64.cast([0,18]),c.i64.cast([0,26])].some(function(a){return c.i64.eq(d[10],a)})&&c.i64.neq(d[11],c.i64.cast([0,20]))&&((d[12]===""?f:d[12])===f||c.i64.lt(d[11],c.i64.cast([0,80])))||[c.i64.cast([0,151]),c.i64.cast([0,155]),c.i64.cast([0,153])].some(function(a){return c.i64.eq(d[10],a)})||[c.i64.cast([0,24]),c.i64.cast([0,22]),c.i64.cast([0,19]),c.i64.cast([0,25])].some(function(a){return c.i64.eq(d[10],a)})?(b=[!0,!0,!1],d[13]=b[0],d[14]=b[1],d[15]=b[2],b):(c.i64.ge(d[11],a[4])||c.i64.eq(d[11],c.i64.cast([0,20]))&&(c.i64.eq(a[1],c.i64.cast([0,2]))||[c.i64.cast([0,23]),c.i64.cast([0,21]),c.i64.cast([0,18]),c.i64.cast([0,26])].some(function(b){return c.i64.eq(a[1],b)}))?(e=[!1,!1,!1],d[16]=e[0],d[17]=e[1],d[18]=e[2],e):(g=[!0,!1,!0],d[16]=g[0],d[17]=g[1],d[18]=g[2],g),b=[d[16],d[17],d[18]],d[13]=b[0],d[14]=b[1],d[15]=b[2],b),e=[d[13],d[14],d[15]],d[7]=e[0],d[8]=e[1],d[9]=e[2],e),g=[d[7],d[8],d[9]],d[3]=g[0],d[4]=g[1],d[5]=g[2],g)})},function(a){return a=[d[3],d[4],d[5]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(e){return d[0]?(d[3]=new c.Map(),d[3].set("thread_fbid",a[0]),d[3].set("force_upsert",a[5]),d[3].set("use_open_messenger_transport",!1),d[3].set("sync_group",a[6]),d[3].set("metadata_only",a[7]),d[3].set("preview_only",!1),d[4]=d[3].get("thread_fbid"),d[3],d[5]=c.toJSON(d[3]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[4]),c.i64.cast([0,209]),d[5],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]))):c.resolve()},function(e){return d[1]?c.seq([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?c.seq([function(b){return c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(b,e){var a=b.done;b=b.value;return a?d[13]=!1:(e=b.item,d[13]=c.i64.eq(e.contactTypeExact,c.i64.cast([0,16]))?!0:!1)})},function(a){return d[3]=d[13]}]):(e=b.item,d[3]=c.i64.eq(e.threadType,c.i64.cast([0,201]))?!0:!1)})},function(b){return d[5]=c.i64.cast([64,1083495711]),d[6]=c.i64.cast([0,0]),d[7]=c.i64.cast([0,0]),d[8]=c.i64.cast([0,0]),d[9]=c.i64.cast([0,8650752]),d[10]=c.i64.cast([0,0]),d[11]=c.i64.cast([0,0]),d[12]=c.i64.cast([0,0]),c.fe(c.ftr(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[0],mailboxType:c.i64.cast([0,0]),threadType:a[1],folderName:a[2],lastReadWatermarkTimestampMs:c.i64.cast([0,0]),removeWatermarkTimestampMs:c.i64.cast([-1,4294967295]),ongoingCallState:c.i64.cast([0,0]),parentThreadKey:a[3],authorityLevel:a[4],capabilities:d[3]?d[9]:d[5],capabilities2:d[3]?d[10]:d[6],capabilities3:d[3]?d[11]:d[7],capabilities4:d[3]?d[12]:d[8],unsendLimitMs:c.i64.cast([-1,4294967295])})},function(e){return[c.i64.cast([0,1]),c.i64.cast([0,201])].some(function(b){return c.i64.eq(a[1],b)})?c.seq([function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[0],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[0])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[0],contactId:a[0],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:a[4],isModerator:!1})},function(a){return c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[13]=a[0],a})},function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[0],d[13]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,d[13])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[0],contactId:d[13],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:a[4],isModerator:!1})}]):c.resolve()}]):c.resolve()},function(b){return d[2]?c.fe(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({authorityLevel:a[4]})}):c.resolve()}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSVerifyThreadExists",["LSVerifyThreadExistsV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[];return c.seq([function(d){return c.sp(b("LSVerifyThreadExistsV2"),a[0],a[1],a[2],a[3],a[4],!1,a[5],!1,!1)},function(a){return c.resolve(d)}])}c=a;f["default"]=c}),66);
__d("IGDChannelsGating",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("9284")===!0}function b(){return c("gkx")("9284")===!0}g.isChannelsTabInProfessionalInboxEnabled=a;g.isChannelsTabAlwaysEnabledInProfessionalInbox=b}),98);
__d("IgTags_InboxFolder",[],(function(a,b,c,d,e,f){a=Object.freeze({PRIMARY:0,GENERAL:1,ONLYIN3P:2,SUBSCRIBER:3,AD_RESPONSES:4,PAID_SUBS:5,AI_BOT:6});f["default"]=a}),66);
__d("IGDProfessionalIGFolderContext.react",["I64","IgTags_InboxFolder","LSIntEnum","emptyFunction","react","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react"),j=i.createContext,k=i.useCallback,l=i.useContext,m=i.useState,n=d("LSIntEnum").ofNumber(c("IgTags_InboxFolder").PRIMARY),o=j(n),p=j(c("emptyFunction"));function a(a){a=a.children;var b=m(n),c=b[0],e=b[1];b=k(function(a){e(function(b){return d("I64").equal(b,a)?b:a})},[]);return h.jsx(o.Provider,{value:c,children:h.jsx(p.Provider,{value:b,children:a})})}a.displayName=a.name+" [from "+f.id+"]";function b(){var a=c("usePolarisViewer")();a=(a=a==null?void 0:a.isProfessionalAccount)!=null?a:!1;return a}function e(){return l(o)}function q(){return l(p)}g.IGDProfessionalFolderContextProvider=a;g.useIsProfessionalIGD=b;g.useIGDProfessionalFolder=e;g.useIGDProfessionalFolderSetter=q}),98);
__d("useHasIGBroadcastChannelTab",["IGDChannelsGating","IGDProfessionalIGFolderContext.react"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("IGDProfessionalIGFolderContext.react").useIsProfessionalIGD();return!a?!1:d("IGDChannelsGating").isChannelsTabAlwaysEnabledInProfessionalInbox()}g["default"]=a}),98);
__d("Box.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={box:{alignItems:"x1qjc9v5",boxSizing:"x9f619",display:"x78zum5",flexBasis:"xdl72j9",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",minHeight:"x2lwn1j",minWidth:"xeuugli",position:"x1n2onr6",zIndex:"x1ja2u2z",$$css:!0}};function a(a,b){var d=a.as;d=d===void 0?"div":d;var e=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["as","xstyle"]);return h.jsx(d,babelHelpers["extends"]({},a,{className:c("stylex")(i.box,e),ref:b}))}a.displayName=a.name+" [from "+f.id+"]";b=h.forwardRef(a);g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("IGDThemeConfig",[],(function(a,b,c,d,e,f){"use strict";a={dark:{"card-background":"rgb(var(--ig-primary-background))","comment-background":"rgb(var(--ig-highlight-background))","filter-primary-icon":"invert(100%)","messenger-card-background":"rgb(var(--ig-primary-background))","mwp-message-list-actions-width":"96px","primary-text":"rgb(var(--ig-primary-text))"},light:{"card-background":"rgb(var(--ig-primary-background))","comment-background":"rgb(var(--ig-highlight-background))","messenger-card-background":"rgb(var(--ig-primary-background))","mwp-message-list-actions-width":"96px","primary-text":"rgb(var(--ig-primary-text))"},type:"VARIABLES"};b=a;f["default"]=b}),66);
__d("MWPThreadsForThreadList",["I64","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){if(c!=null){a=d("ReQL").fromTableDescending(a.table("threads").index("parentThreadKeyLastActivityTimestampMs")).getKeyRange(b).bounds({gt:d("ReQL").key(d("I64").zero)});b=c.minLastActivityTimestampMs;c=c.maxLastActivityTimestampMs;b=!d("I64").equal(b,d("I64").zero)&&!d("I64").equal(b,d("I64").one)?b:void 0;c=!d("I64").equal(c,d("I64").zero)&&!d("I64").equal(c,d("I64").one)?c:void 0;if(b!=null)if(c!=null)return a.bounds({gte:d("ReQL").key(b),lte:d("ReQL").key(c)});else return a.bounds({gte:d("ReQL").key(b)});else if(c!=null)return a.bounds({lte:d("ReQL").key(c)});else return a}else return d("ReQL").empty()}g.createIterable=a}),98);
__d("getBreadcrumbTitleFromRouteState",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){d===void 0&&(d=!1);if(!b)return a;var e=b.hosted,f=b.main;b=b.pushViewStack;c=(c=c)!=null?c:" | ";var g=[];if(b!=null&&b.length>0){b=b[b.length-1];b=(b=b.route.meta)==null?void 0:b.title;b!=null&&g.push(b)}else{if(e!=null){e=(b=e.route.meta)==null?void 0:b.title;e!=null&&g.push(e)}e=(b=f.route.meta)==null?void 0:b.title;e!=null&&g.push(e);e=(b=f.route.meta)==null?void 0:b.accessory;e!=null&&g.push(e)}(!d||g.length===0)&&g.push(a);f=new Set(g);return f.size!==g.length?a:g.join(c)}f["default"]=a}),66);
__d("useCometMetaManagerRouteFavicon",["ExecutionEnvironment","react","recoverableViolation","useCometRouterState"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef;function a(a){var b,d=c("useCometRouterState")(),e=(b=d==null?void 0:(b=d.hosted)==null?void 0:(b=b.route.meta)==null?void 0:b.favicon)!=null?b:d==null?void 0:(b=d.main.route.meta)==null?void 0:b.favicon,f=i(null);h(function(){if(!c("ExecutionEnvironment").canUseDOM)return;f.current==null&&(f.current=document.querySelector('link[rel*=icon][href*=".ico"]'));var b=f.current;if(b!=null&&b instanceof HTMLLinkElement){var d=b.dataset,g=d.badgedIcon;d=d.defaultIcon;a&&(g==null||d==null)&&c("recoverableViolation")("Unable to update favicon. icon href was not found on the favicon element, please set data-default-icon and data-badged-icon attributes.","comet_ui");d=e?e["default"]:d;g=e?e.badged:g;g=a&&g!=null?g:d;b.href!==g&&g!=null&&(b.href=g)}},[e,a])}g["default"]=a}),98);
__d("useDocumentTitleBlinkEffect",["ExecutionEnvironment","clearInterval","react","setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect,i=1500;function a(a){var b=a.blinkingTitle,d=a.routeTitle;h(function(){if(!c("ExecutionEnvironment").canUseDOM)return;if(b==null||b===""){document.title!==d&&(document.title=d);return}var a=c("setInterval")(function(){document.title===d?document.title=b:document.title=d},i);return function(){c("clearInterval")(a),document.title=d}},[b,d])}g["default"]=a}),98);
__d("CometRouterMetaManager",["getBreadcrumbTitleFromRouteState","useCometMetaManagerRouteFavicon","useCometRouterState","useDocumentTitleBlinkEffect"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.appTitle,d=a.badgeConfig,e=a.blinkingTitle,f=a.customBreadcrumbTitleSeparator;f=f===void 0?null:f;var g=a.onlyShowAppTitleIfNoTitle;g=g===void 0?!1:g;a=a.shouldBadgeFavicon;a=a===void 0?!1:a;var i=c("useCometRouterState")();b=c("getBreadcrumbTitleFromRouteState")(b,i,f,g);i=d?h({badgeConfig:d,title:b}):b;c("useDocumentTitleBlinkEffect")({blinkingTitle:e,routeTitle:i});c("useCometMetaManagerRouteFavicon")(a);return null}function h(a){var b=a.badgeConfig,c=b.badgeCount;b=b.badgeCountLimit;a=a.title;b=c>b?"("+b+"+) ":c>0?"("+c+") ":"";return""+b+a}g["default"]=a}),98);
__d("PolarisDirectInboxMetaManager.react",["CometErrorBoundary.react","CometRouterMetaManager","IGDUnreadBadgeCountUpdates","PolarisGetRoutePageLogging","PolarisTimeSpentNavigation","cr:3278","react","recoverableViolation","useCometRouterState","usePolarisDirectFeatures"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useEffect;function j(a,b){var c=" \u2022 ";if(b==null||b==="")return a;else if(a!=="")return""+b.toString()+c+a.toString();return b}function k(a){a=a.title;var d=c("IGDUnreadBadgeCountUpdates")(),e=c("usePolarisDirectFeatures")();e=e.directTitle;e=j(e,a);a=b("cr:3278");a=a?a:function(){return void 0};a=a();return h.jsx(c("CometRouterMetaManager"),{appTitle:String(e),badgeConfig:{badgeCount:d,badgeCountLimit:9},blinkingTitle:a})}k.displayName=k.name+" [from "+f.id+"]";function l(a){c("recoverableViolation")("Error in messenger route","messenger_web_product",{error:a})}function a(a){var b=a.id;a=a.title;var e=c("useCometRouterState")(),f=e!=null?d("PolarisGetRoutePageLogging").getRoutePageLogging(e):void 0;i(function(){d("PolarisTimeSpentNavigation").setPage(b,f==null?void 0:f.params)},[b,f==null?void 0:f.params]);return h.jsx(c("CometErrorBoundary.react"),{onError:l,children:h.jsx(k,{title:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSGetIfViewerIsWorkplaceUser",["gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,b=a[a.length-1];b.n;var d=[];return d[0]=c("gkx")("7530"),b.resolve(d)}b=a;g["default"]=b}),98);
__d("LSGetThreadParticipantDisplayName",["LSGetIfViewerIsWorkplaceUser"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(a){return c.sp(b("LSGetIfViewerIsWorkplaceUser")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return d[0]?c.seq([function(b){return c.ftr(c.db.table(7).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.id,a[1])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,2352696798]),f).then(function(a){return d[4]=a})},function(a){return d[2]=d[4]}]):(b=a.item,d[2]=b.name)})},function(a){return d[1]=d[2]}]):c.seq([function(b){return c.ftr(c.db.table(14).fetch([[[a[0],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[2]=f:(b=a.item,d[2]=b.nickname)})},function(b){return c.ftr(c.db.table(7).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.id,a[1])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,14617150]),f).then(function(a){return d[6]=a})},function(a){return d[4]=d[6]}]):(b=a.item,d[4]=b.firstName==null?b.name:b.firstName)})},function(a){return d[1]=d[2]==null?d[4]:d[2]}])},function(a){return e[0]=d[1]}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSMarkThreadRead",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.ftr(b.db.table(9).fetch([[[a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[1])&&b.i64.gt(a[0],c.lastReadWatermarkTimestampMs)}),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[0]})})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);